## 負載平衡器的差異

有不同的選項可使用 Microsoft Azure 來分散網路流量。這些選項的運作方式彼此間會有差異，其具備不同的功能組合並支援不同的案例。它們每個都可單獨使用，或組合在一起。

- Azure 負載平衡器是網路層級 (OSI 網路參考堆疊中的層級 4) 上運作。它會在同一個 Azure 資料中心執行的應用程式執行個體之間，提供網路層級的流量分散功能。

- 應用程式閘道是在應用程式層級 (OSI 網路參考堆疊中的層級 7) 上運作。它會用來當做反向 Proxy 服務，終止用戶端連線，並將要求轉寄到後端端點。

- 	流量管理員是在 DNS 層級上運作。它會使用 DNS 回應，將使用者流量導向全域散佈的端點。接著用戶端會直接連接到這些端點。下表摘要說明每個服務所提供的功能︰

| 服務 | Azure 負載平衡器 | 應用程式閘道 | 流量管理員 |
|---|---|---|---|
|Technology| 網路層級 (層級 4) | 應用程式層級 (層級 7) | DNS 層級 |
| 支援的應用程式通訊協定 |	任意 | HTTP 和 HTTPS | 	任意 (HTTP/S 端點是端點監視所需的必要項) |
| Endpoints | Azure VM 和雲端服務角色執行個體 | 任意的 Azure 內部 IP 位址或公用網際網路 IP 位址 | Azure VM、雲端服務、Azure Web Apps 和外部端點 |
| Vnet 支援 | 可用於網際網路面向和內部 (Vnet) 應用程式 | 可用於網際網路面向和內部 (Vnet) 應用程式 |	只支援網際網路面向的應用程式 |
端點監視 | 透過探查支援 | 透過探查支援 | 透過 HTTP/HTTPS GET 支援 | 
<BR> Azure 負載平衡器和應用程式閘道會將網路流量路由傳送到端點，但是它們有不同的使用案例來處理流量。下表可協助您了解兩個負載平衡器之間的差異︰


| 類型 | Azure 負載平衡器 | 應用程式閘道 |
|---|---|---|
| 通訊協定 | UDP/TCP | HTTP/ HTTPS |
| IP 保留區 | 支援 | 不支援 | 
| 負載平衡模式 | 5 個 Tuple (來源 IP、來源連接埠、目的地 IP、目的地連接埠、通訊協定類型) | CookieBasedAffinity = false,rules = basic (Round-Robin) | 
| 負載平衡模式 (來源 IP / 相黏工作階段) | 2 個 Tuple (來源 IP 和目的地 IP)、3 個 Tuple (來源 IP、目的地 IP 和連接埠)。可以依據虛擬機器數目進行相應增加或相應減少 | CookieBasedAffinity = true,rules = basic (Roud-Robin) (適用於新連線)。 |
| 健康狀態探查 | 預設值︰探查間隔 - 15 秒。不進入輪替︰2 個連續的失敗。支援使用者定義的探查 | 閒置探查間隔 30 秒。在 5 個連續的即時流量失敗或處於閒置模式的單一探查失敗之後結束。支援使用者定義的探查 | 
| SSL 卸載 | 不支援 | 支援 | 


  

<!---HONumber=AcomDC_0406_2016-->