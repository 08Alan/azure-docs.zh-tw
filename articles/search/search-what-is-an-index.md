<properties
	pageTitle="Azure 搜尋服務中的索引 | Microsoft Azure | 雲端託管搜尋服務"
	description="Azure 搜尋服務中的索引是什麼？如何使用？"
	services="search"
	documentationCenter=""
	authors="HeidiSteen"
	manager="mblythe"
	editor=""
    tags="azure-portal"/>

<tags
	ms.service="search"
	ms.devlang="na"
	ms.workload="search"
	ms.topic="get-started-article"
	ms.tgt_pltfrm="na"
	ms.date="11/09/2015"
	ms.author="heidist"/>

# Azure 搜尋服務中的索引
> [AZURE.SELECTOR]
- [Overview](search-what-is-an-index.md)
- [Portal](search-create-index-portal.md)
- [.NET](search-create-index-dotnet.md)
- [REST](search-create-index-rest-api.md)

Azure 搜尋是一種提供搜尋引擎的雲端託管搜尋服務，此搜尋引擎的搜尋功能可讓您在自訂應用程式中使用 Bing 或 Google 等工具、使用 .NET 和 REST API 將 Azure 搜尋服務與您的 Web 或桌面應用程式整合，和以*索引*的形式對可搜尋的資料進行資料儲存。

##什麼是索引？

*索引*是對 Azure 搜尋服務所使用的文件和其他建構所做的持續性儲存。

更具體來說，它包含在處理索引、執行查詢，或將搜尋結果清單、多面向導覽結構或詳細資料頁面傳回至您的應用程式時所使用的所有可搜尋資料。在 Azure 搜尋服務中，索引也會包含用於篩選運算式或計分設定檔 (用來修改查詢或提升搜尋排名分數)，以及範圍僅限於自訂應用程式 (與 Azure 搜尋服務整合) 之結構的非可搜尋資料。

如果您熟悉資料庫概念，索引在概念上類似於資料表，而文件大致上相當於資料表中的資料列。

索引的主要部分 (將在本文中進一步說明) 如下：- 欄位 (會定義*文件*的主體，是特定行為的屬性) 計分設定檔 - 建議 - CORS 選項 - 預設解析器

在佈建您的應用程式所使用的搜尋服務時，您需要建立索引。建立索引是一項以定義索引結構描述為主的工作。其中至少包含定義欄位及設定屬性兩項作業。您可以選擇性地定義計分設定檔和建議，以提升搜尋體驗。

若要建立結構描述，您可以使用入口網站，或撰寫會呼叫 .NET SDK 或 REST API 的程式碼。

在您定義結構描述並建立索引後，必須在個別的作業中加以填入。如需關於在索引建立後進行資料擷取的詳細資訊，請參閱[將資料匯入至 Azure 搜尋服務](search-what-is-data-import.md)。

##如何在 Azure 搜尋服務中使用索引？

Azure 搜尋服務所執行的所有資料相關作業，都會從索引取用或傳回資料。此原則沒有例外：您無法將服務指向索引以外的其他資料來源，而在回應中傳回外部資料。

以會累積和操作資料的應用程式而言 (例如，將資料儲存在 OLTP 資料庫之線上零售應用程式的銷售交易)，Azure 搜尋服務索引將是您整個解決方案中額外的資料來源。索引是僅供您的搜尋服務使用的專用資料儲存體。讓您的服務有鄰近的專用資料來源，可確保搜尋結果的一致性、降低變動性、減少您的應用程式與 Azure 搜尋服務之間的往返次數，以及改善搜尋作業的整體效能，因為沒有競用資源或資料的情形。

##定義結構描述的指引

結構描述會建立為 JSON 結構。您應為每個與 Azure 搜尋服務整合的自訂解決方案建立一個索引。您無法連結或聯結多個索引，但您可以建立複雜索引，以容納您的解決方案所需的搜尋案例範圍。例如，如果您的應用程式支援多種語言，則在索引的欄位集合中，每個欄位都可能會有語言特定變異。

當設計索引時，請在規劃階段花時間仔細考量每個決策。在索引部署後若要加以變更，將牽涉到重建和重新載入資料。如果您以程式碼建立索引，此步驟將會比以手動方式在入口網站中建立容易得多。

確實了解原始來源資料，是妥善建立結構描述所不可或缺的。您將必須比對資料類型，確知要以哪個欄位做為*主要*欄位來唯一識別索引中的每個文件，以及應在搜尋結果清單或詳細資料頁面中公開哪個欄位。

如果索引中包含附有資源 URL 的代表欄位，則應將影像、音訊或視訊內容儲存於他處。任何不可搜尋的內容 (尤其是二進位內容) 皆應儲存於他處，然後由索引中某欄位內的 URI 加以參考。

您可以想見，索引必須定期與您解決方案中使用的其他資料來源同步處理。在線上零售目錄中，擷取銷售交易的庫存資料庫必須具有與透過搜尋結果呈現的資料相同的 SKU、價格和可用性。根據您的解決方案所能接受的延遲程度，您的資料同步處理頻率可以是一週一次、一天一次，或並行寫入至庫存資料庫和 Azure 搜尋服務索引的接近即時。[將資料匯入至 Azure 搜尋服務](search-what-is-data-import.md)會詳細說明可用的選項。

##結構描述元素

索引由屬性化欄位、資料值，和決定如何建構查詢與搜尋結果的其他建構所組成。

- 欄位會定義文件的主體。線上零售商會需要每個 SKU 的文件、新聞組織會需要每篇文章的文件，而資訊媒體入口網站則需要每個廠商或店面的文件。
- 屬性 (Attribute 或 property) 是欄位的註解，會指定該欄位所允許的資料類型、長度、值和行為。您可以逐一個別指定欄位是否可供搜尋、擷取或排序。您也可以指定要在欄位層級上使用的語言分析器。*主要*是結構描述中的保留欄位，可為欄位集合中的每個文件提供唯一識別碼。
- 計分設定檔是一組條件，可讓設定檔所設定的特性較多的搜尋結果提升其排名。比方說，假設某個搜尋詞彙在產品名稱和產品說明中都有相符項，您可能會想讓產品名稱中的相符項排名高於在說明中找到的相符項。
- 建議也稱為自動完成或自動提示查詢，會定義為索引中的區段。
- 預設語言分析器可以指定於索引層級上，全域套用至所有欄位。
- CORS 選項可支援跨網域指令碼，也屬於索引定義的一部分。

## 索引屬性

|**屬性**|說明|
|------------|-----------|
|**Retrievable**|指定搜尋結果中是否可傳回某欄位。|
|**Filterable**|允許欄位用於 **$filter** 查詢中。|
|**Sortable**|允許欄位做為排序選項使用。|
|**Facetable**|允許欄位用於自我引導篩選的多面向導覽結構中。通常，欄位若包含您可以用來將多份文件群組在一起的重複值 (例如，落在單一產品或服務類別目錄下的多份文件)，最適合做為 Facet。|
|**金鑰**|提供每一份文件的唯一識別碼，用於查閱文件。每個索引必須有一個索引鍵。只有一個欄位可以是索引鍵，而且它必須設定為 Edm.String。|
|**Searchable**|將欄位標記為 full-text searchable。|

## 雲端中的儲存

由於 Azure 搜尋服務是完全受管理的搜尋服務，因此資料儲存會以內部作業的形式處理。身為程式設計人員，請務必了解您無法略過 Azure 搜尋服務 API 而直接連接到索引，也無法在未使用入口網站通知或 API 呼叫的情況下監視索引大小或健全狀況。目前並沒有備份或還原索引的機制，也無法在儲存層上最佳化或調整效能。資料會在幕後儲存為 blob 儲存體，但對於索引的實體儲存和管理，最恰當的思考方向是將其視為未來可能會變更的實作細節。此服務的主要優點之一，是資料管理無需人為操作。

如果查詢磁碟區或資料儲存體需求會隨時間變更，您可以藉由新增或移動複本與資料分割來增加或減少容量。如需詳細資料，請參閱[在 Azure 中管理您的搜尋服務](search-manage.md)或[服務限制](search-limits-quotas-capacity.md)。

<!---HONumber=Nov15_HO3-->