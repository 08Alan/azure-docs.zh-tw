<properties
	pageTitle="SQL 錯誤碼 - 資料庫連線錯誤 | Microsoft Azure"
	description="了解 SQL Database 用戶端應用程式的 SQL 錯誤碼，例如常見的資料庫連線錯誤、資料庫副本問題，以及一般錯誤。"
	keywords="sql error code,access sql,database connection error,sql error codes,sql 錯誤碼,存取 sql,資料庫連線錯誤,sql 錯誤碼"
	services="sql-database"
	documentationCenter=""
	authors="MightyPen"
	manager="jeffreyg"
	editor="" />


<tags
	ms.service="sql-database"
	ms.workload="data-management"
	ms.tgt_pltfrm="na"
	ms.devlang="na"
	ms.topic="article"
	ms.date="12/06/2015"
	ms.author="genemi"/>


# SQL Database 用戶端應用程式的 SQL 錯誤碼：資料庫連線錯誤和其他問題


<!--
Old Title on MSDN:  Error Messages (Azure SQL Database)
ShortId on MSDN:  ff394106.aspx
Dx 4cff491e-9359-4454-bd7c-fb72c4c452ca
-->


本文列出 SQL Database 用戶端應用程式的 SQL 錯誤碼，包括資料庫連線錯誤、暫時性錯誤、資源管理錯誤、資料庫副本錯誤，以及其他錯誤。大多數分類是專門針對 Azure SQL Database，並不適用 Microsoft SQL Server。

如果您的用戶端應用程式中發生任何指定錯誤，您可以向您的使用者提供您自訂的訊息。

<a id="bkmk_connection_errors" name="bkmk_connection_errors">&nbsp;</a>


## 資料庫連線錯誤、暫時性錯誤及和其他暫時錯誤

下表涵蓋您的應用程式嘗試存取 SQL Database 可能發生之連線遺失錯誤和其他暫時性錯誤的 SQL 錯誤碼。


### 最常見的資料庫連線錯誤和暫時性錯誤


暫時性錯誤通常是資訊清單，在您用戶端程式中的下列錯誤訊息之一：

- 伺服器 <Azure_instance> 上的資料庫 <db_name> 目前無法使用。請稍後重試連接。如果問題持續發生，請連絡客戶支援服務，並提供工作階段追蹤識別碼 <session_id>

- 伺服器 <Azure_instance> 上的資料庫 <db_name> 目前無法使用。請稍後重試連接。如果問題持續發生，請連絡客戶支援服務，並提供工作階段追蹤識別碼 <session_id>。(Microsoft SQL Server，錯誤：40613)

- 遠端主機已強制關閉現有的連接。

- System.Data.Entity.Core.EntityCommandExecutionException: 執行命令定義時發生錯誤。詳細資訊請參閱內部例外狀況。---> System.Data.SqlClient.SqlException: 從伺服器接收結果時發生傳輸層級錯誤。(提供者: 工作階段提供者, 錯誤: 19 - 無法使用實際連線)

暫時性錯誤應該會提示您的用戶端應用程式，執行設計用來重試操作的*重試邏輯*。如需重試邏輯的程式碼範例，請參閱：


- [SQL Database 的用戶端開發和快速入門程式碼範例](sql-database-develop-quick-start-client-code-samples.md)

- [修正 SQL Database 中連接錯誤和暫時性錯誤的動作](sql-database-connectivity-issues.md)


### 暫時性錯誤錯誤碼


| 錯誤碼 | 嚴重性 | 說明 |
| ---: | ---: | :--- |
| 4060 | 16 | 無法開啟登入所要求的資料庫 "%.&#x2a;ls"。登入失敗。 |
|40197|17|服務處理您的要求時發生錯誤。請再試一次。錯誤代碼 %d。<br/><br/>當服務因為軟體或硬體升級、硬體故障或任何其他容錯移轉問題而關閉時，您會收到這個錯誤。內嵌在錯誤 40197 訊息中的錯誤代碼 (%d) 提供發生的失敗或容錯移轉種類的其他資訊。內嵌在錯誤 40197 訊息中錯誤代碼的一些範例包括包括 40020、40143、40166 和 40540。<br/><br/>重新連接至 SQL Database 伺服器會將您自動連接至狀況良好的資料庫副本。您的應用程式必須攔截錯誤 40197、記錄訊息中內嵌的錯誤碼 (%d) 以進行疑難排解，並嘗試重新連接到 SQL Database 直到資源可供使用，並再次建立您的連線。|
|40501|20|服務目前忙碌中。在 10 秒後重試要求。事件識別碼：%ls。代碼：%d。<br/><br/>*請注意：*如需詳細資訊，請參閱：<br/>• [Azure SQL Database 資源限制](sql-database-resource-limits.md)。
|40613|17|資料庫 '%.&#x2a;ls' (在伺服器 '%.&#x2a;ls' 上) 目前無法使用。請稍後重試連接。如果問題持續發生，請連絡客戶支援服務，並提供工作階段追蹤識別碼 '%.&#x2a;ls'。|
|49918|16|無法處理要求。沒有足夠的資源來處理要求。<br/><br/>服務目前忙碌中。請稍後再重試要求。 |
|49919|16|無法處理建立或更新要求。有太多訂用帳戶 "%ld" 的建立或更新作業正在進行中。<br/><br/>服務正忙於處理您的訂用帳戶或伺服器的多個建立或更新要求。要求目前已封鎖以求資源最佳化。查詢 [sys.dm\_operation\_status](https://msdn.microsoft.com/library/dn270022.aspx) 以查看暫止的作業。等待直到暫止的建立或更新要求已完成，或刪除您其中一個暫止要求，稍後再重試您的要求。 |
|49920|16|無法處理要求。太多訂用帳戶 "%ld" 的作業正在進行中。<br/><br/>服務正忙於處理此訂用帳戶的多個要求。要求目前已封鎖以求資源最佳化。查詢 [sys.dm\_operation\_status](https://msdn.microsoft.com/library/dn270022.aspx) 以查看作業狀態。等候直到暫止的要求已完成，或刪除您其中一個暫止要求，稍後再重試您的要求。 |


<a id="bkmk_b_database_copy_errors" name="bkmk_b_database_copy_errors">&nbsp;</a>

## 資料庫複製錯誤


下表涵蓋在 Azure SQL Database 中複製資料庫時您可能遇到的各種錯誤。如需詳細資訊，請參閱[複製 Azure SQL Database](sql-database-copy.md)。


|錯誤碼|嚴重性|說明|
|---:|---:|:---|
|40635|16|IP 位址 '%.&#x2a;ls' 的用戶端已暫時停用。|
|40637|16|建立資料庫副本目前已停用。|
|40561|16|資料庫複製失敗。來源或目標資料庫不存在。|
|40562|16|資料庫複製失敗。已經卸除來源資料庫。|
|40563|16|資料庫複製失敗。已經卸除目標資料庫。|
|40564|16|資料庫複製因內部錯誤而失敗。請卸除目標資料庫並再試一次。|
|40565|16|資料庫複製失敗。不允許從相同來源進行超過 1 個並行資料庫複製。請卸除目標資料庫並稍後再試一次。|
|40566|16|資料庫複製因內部錯誤而失敗。請卸除目標資料庫並再試一次。|
|40567|16|資料庫複製因內部錯誤而失敗。請卸除目標資料庫並再試一次。|
|40568|16|資料庫複製失敗。來源資料庫已變成無法使用。請卸除目標資料庫並再試一次。|
|40569|16|資料庫複製失敗。目標資料庫已變成無法使用。請卸除目標資料庫並再試一次。|
|40570|16|資料庫複製因內部錯誤而失敗。請卸除目標資料庫並稍後再試一次。|
|40571|16|資料庫複製因內部錯誤而失敗。請卸除目標資料庫並稍後再試一次。|


<a id="bkmk_c_resource_gov_errors" name="bkmk_c_resource_gov_errors">&nbsp;</a>

## 資源管理錯誤


下表涵蓋使用 Azure SQL Database 時過度使用資源所造成的錯誤。例如：


- 也許您的交易已開啟太長的時間。
- 也許您的交易持有太多鎖定。
- 也許您的程式耗用太多記憶體。
- 也許您的程式耗用太多 `TempDb` 空間。


**秘訣：**下列連結提供適用於本節中大部分或所有錯誤的詳細資訊：


- [Azure SQL Database 資源限制](sql-database-resource-limits.md)


|錯誤碼|嚴重性|說明|
|---:|---:|:---|
|10928|20|資源識別碼：%d。資料庫的 %s 限制是 %d，且已達到。如需詳細資訊，請參閱 [http://go.microsoft.com/fwlink/?LinkId=267637](http://go.microsoft.com/fwlink/?LinkId=267637)。<br/><br/>資源識別碼可指出已達到限制的資源。對於背景工作執行緒，資源識別碼 = 1。對於工作階段，資源識別碼 = 2。<br/><br/>*注意：*如需有關此錯誤以及如何解決它的詳細資訊，請參閱：<br/>• [Azure SQL Database 資源限制](sql-database-resource-limits.md)。 |
|10929|20|資源識別碼：%d。%s 最小保證是 %d，最大限制是 %d，而資料庫的目前使用量是 %d。但伺服器目前太忙碌，無法針對此資料庫支援大於 %d 的要求。如需詳細資訊，請參閱 [http://go.microsoft.com/fwlink/?LinkId=267637](http://go.microsoft.com/fwlink/?LinkId=267637)。否則，請稍後再試。<br/><br/>資源識別碼可指出已達到限制的資源。對於背景工作執行緒，資源識別碼 = 1。對於工作階段，資源識別碼 = 2。<br/><br/>*注意：*如需有關此錯誤以及如何解決它的詳細資訊，請參閱：<br/>• [Azure SQL Database 資源限制](sql-database-resource-limits.md)。|
|40544|20|資料庫已達到大小配額。資料分割或刪除資料、卸除索引，或參閱可能解決方式的文件。|
|40549|16|工作階段已終止，因為您有長時間執行的交易。請嘗試縮短您的交易時間。|
|40550|16|工作階段已終止，因為它取得太多鎖定。嘗試在單一交易中讀取或修改較少的資料列。|
|40551|16|已終止工作階段，因為它過度使用 `TEMPDB`。請嘗試修改查詢以減少暫存資料表空間的使用量。<br/><br/>*秘訣：*如果您使用暫存物件，請在工作階段不再需要暫存物件時予以卸除，藉此節省 `TEMPDB` 資料庫的空間。|
|40552|16|已終止工作階段，因為過度使用交易記錄檔空間。請嘗試將單一交易的資料列修改成較小數目。<br/><br/>*秘訣：*如果您使用 `bcp.exe` 公用程式或 `System.Data.SqlClient.SqlBulkCopy` 類別執行大量插入，請嘗試使用 `-b batchsize` 或 `BatchSize` 選項來限制每一筆交易中要複製到伺服器的資料列數目。如果您要使用 `ALTER INDEX` 陳述式重建索引，請嘗試使用 `REBUILD WITH ONLINE = ON` 選項。|
|40553|16|已終止工作階段，因為過度使用記憶體。請嘗試修改查詢以處理較少的資料列。<br/><br/>*秘訣：*減少 Transact-SQL 程式碼中的 `ORDER BY` 和 `GROUP BY` 作業數目，減少查詢的記憶體需求。|


如需資源管理和相關聯錯誤的額外討論，請參閱：


- [Azure SQL Database 資源限制](sql-database-resource-limits.md)。



<a id="bkmk_e_general_errors" name="bkmk_e_general_errors">&nbsp;</a>

## 一般錯誤


下表列出所有不屬於任何先前類別目錄的一般錯誤。


|錯誤碼|嚴重性|說明|
|---:|---:|:---|
|15006|16|<AdministratorLogin> 不是有效的名稱，因為它包含無效字元。|
|18452|14|登入失敗。登入是來自不受信任的網域並且無法用於 Windows 驗證。%.&#x2a;ls (這個版本的 SQL Server 中不支援 Windows 登入)。|
|18456|14|使用者 '%.&#x2a;ls' 登入失敗。%.&#x2a;ls%.&#x2a;ls (使用者 "%.&#x2a;ls" 登入失敗。密碼變更失敗。在登入期間變更密碼在這個版本的 SQL Server 中不受支援。)|
|18470|14|使用者 '%.&#x2a;ls' 登入失敗。原因：帳戶已停用。%.&#x2a;ls|
|40014|16|無法在相同交易中使用多個資料庫。|
|40054|16|在這個版本的 SQL Server 中不支援沒有叢集索引的資料表。建立叢集的索引並再試一次。|
|40133|15|此作業在這個版本的 SQL Server 中不受支援。|
|40506|16|指定的 SID 對這個版本的 SQL Server 無效。|
|40507|16|'%.&#x2a;ls' 無法在這個版本的 SQL Server 中使用參數叫用。|
|40508|16|USE 陳述式不支援在資料庫之間切換。使用新連接來連接到不同的資料庫。|
|40510|16|陳述式 '%.&#x2a;ls' 在這個版本的 SQL Server 中不受支援|
|40511|16|內建函數 '%.&#x2a;ls' 在這個版本的 SQL Server 中不受支援。|
|40512|16|被取代的功能 '%ls' 在這個版本的 SQL Server 中不受支援。|
|40513|16|伺服器變數 '%.&#x2a;ls' 在這個版本的 SQL Server 中不受支援。|
|40514|16|'%ls' 在這個版本的 SQL Server 中不受支援。|
|40515|16|'%.&#x2a;ls' 中資料庫和/或伺服器名稱的參考在這個版本的 SQL Server 中不受支援。|
|40516|16|全域暫存物件在這個版本的 SQL Server 中不受支援。|
|40517|16|關鍵字或陳述式選項 '%.&#x2a;ls' 在這個版本的 SQL Server 中不受支援。|
|40518|16|DBCC 命令 '%.&#x2a;ls' 在這個版本的 SQL Server 中不受支援。|
|40520|16|安全性實體類別 '%S\_MSG' 在這個版本的 SQL Server 中不受支援。|
|40521|16|安全性實體類別 '%S\_MSG' 在這個版本的 SQL Server 的伺服器範圍中不受支援。|
|40522|16|資料庫主體 '%.&#x2a;ls' 類型在這個版本的 SQL Server 中不受支援。|
|40523|16|隱含使用者 '%.&#x2a;ls' 建立在這個版本的 SQL Server 中不受支援。明確建立使用者之後再使用它。|
|40524|16|資料型別 '%.&#x2a;ls' 在這個版本的 SQL Server 中不受支援。|
|40525|16|WITH '%.ls' 在這個版本的 SQL Server 中不受支援。|
|40526|16|'%.&#x2a;ls' 資料列集提供者在這個版本的 SQL Server 中不受支援。|
|40527|16|連結的伺服器在這個版本的 SQL Server 中不受支援。|
|40528|16|無法在這個版本的 SQL Server 中將使用者對應到憑證、非對稱金鑰或 Windows 登入。|
|40529|16|模擬內容中的內建函數 '%.&#x2a;ls' 在這個版本的 SQL Server 中不受支援。|
|40532|11|無法開啟登入所要求的伺服器 "%.&#x2a;ls"。登入失敗。|
|40553|16|已終止工作階段，因為過度使用記憶體。請嘗試修改查詢以處理較少的資料列。<br/><br/>*請注意：*減少您 Transact-SQL 程式碼中的 `ORDER BY` 和 `GROUP BY` 的作業數目，有助於降低查詢的記憶體需求。|
|40604|16|無法 CREATE/ALTER DATABASE，因為它會超過伺服器的配額。|
|40606|16|附加資料庫在這個版本的 SQL Server 中不受支援。|
|40607|16|Windows 登入在這個版本的 SQL Server 中不受支援。|
|40611|16|伺服器最多可以定義 128 個防火牆規則。|
|40614|16|防火牆規則的起始 IP 位址不能超過結束 IP 位址。|
|40615|16|無法開啟登入所要求的伺服器 '{0}'。不允許 IP 位址 '{1}' 的用戶端存取伺服器。若要啟用存取，請使用 SQL Database 入口網站，或在 master 資料庫上執行 sp\_set\_firewall\_rule，為此 IP 位址或位址範圍建立防火牆規則。可能需要五分鐘的時間，這項變更才會生效。|
|40617|16|以 <rule name> 開頭的防火牆規則名稱太長。最大長度為 128。|
|40618|16|防火牆規則名稱不可為空白。|
|40620|16|使用者 "%.&#x2a;ls" 登入失敗。密碼變更失敗。在登入期間變更密碼在這個版本的 SQL Server 中不受支援。|
|40627|20|伺服器 '{0}' 和資料庫 '{1}' 上的作業正在進行中。請稍候幾分鐘後再試一次。|
|40630|16|密碼驗證失敗。因為密碼長度太短，密碼不符合原則需求。|
|40631|16|您指定的密碼太長。密碼必須不超過 128 個字元。|
|40632|16|密碼驗證失敗。因為密碼不夠複雜，密碼不符合原則需求。|
|40636|16|無法在此作業中使用保留的資料庫名稱 '%.&#x2a;ls'。|
|40638|16|無效的訂用帳戶識別碼 <subscription-id>。訂用帳戶不存在。|
|40639|16|要求不符合結構描述：<schema error>。|
|40640|20|伺服器發生非預期的例外狀況。|
|40641|16|指定的位置無效。|
|40642|17|伺服器目前太過忙碌。請稍後再試一次。|
|40643|16|指定的 x-ms-version 標頭值無效。|
|40644|14|無法授權存取指定的訂用帳戶。|
|40645|16|Servername <servername> 不能是空白或 Null。它可以只由小寫字母 'a'-'z'、數字 0-9 和連字號組成。連字號不得在名稱的開頭或結尾。|
|40646|16|訂用帳戶 ID 不能空白。|
|40647|16|訂用帳戶 <subscription-id> 沒有伺服器的伺服器名稱。|
|40648|17|已經執行太多要求。請稍後重試。|
|40649|16|指定了無效的 Content-Type。僅支援 application/xml。|
|40650|16|訂用帳戶 <subscription-id> 不存在或尚未準備進行作業。|
|40651|16|無法建立伺服器，因為訂用帳戶 <subscription-id> 已停用。|
|40652|16|無法移動或建立伺服器。訂用帳戶 <subscription-id> 會超出伺服器配額。|
|40671|17|閘道器與管理服務之間的通訊失敗。請稍後重試。|
|40852|16|無法開啟登入所要求的資料庫 '%.*ls' (在伺服器 '%.*ls' 上)。只允許使用已啟用安全性的連接字串存取資料庫。若要存取此資料庫，將連接字串修改成在伺服器 FQDN 中包含 'secure'。也就是說，'server name'.database.windows.net 應修改為 'server name'.database.`secure`.windows.net.|
|45168|16|SQL Azure 系統未達負載，並正在對單一伺服器的並行 DB CRUD 作業 (例如，建立資料庫) 放置上限。錯誤訊息中指定的伺服器已超過最大並行連接數目。請稍後再試。|
|45169|16|SQL Azure 系統未達負載，並正在對單一訂用帳戶的並行伺服器 CRUD 作業 (例如，建立資料庫) 的數量放置上限。錯誤訊息中指定的訂用帳戶已超出最大並行連接數目，因此要求已遭到拒絕。請稍後再試。|


## 相關連結

- [Azure SQL Database 一般限制與方針](sql-database-general-limitations.md)
- [Azure SQL Database 資源限制](sql-database-resource-limits.md)

<!---HONumber=AcomDC_0128_2016-->