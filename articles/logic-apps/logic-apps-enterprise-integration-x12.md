---
title: "在 Azure 邏輯應用程式中建立 X12 合約 | Microsoft Docs"
description: "了解如何建立企業整合套件的 X12 合約 | Azure 邏輯應用程式"
services: logic-apps
documentationcenter: .net,nodejs,java
author: padmavc
manager: anneta
editor: cgronlun
ms.assetid: 7422d2d5-b1c7-4a11-8c9b-0d8cfa463164
ms.service: logic-apps
ms.workload: integration
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 01/31/2017
ms.author: padmavc
translationtype: Human Translation
ms.sourcegitcommit: 1a982309fe771c0c244c691ae648bd5f4844a825
ms.openlocfilehash: f7b61b85cadfabde6637e46f0e65108a29901198


---
# <a name="enterprise-integration-with-x12"></a>具備 X12 的企業整合

## <a name="prereqs"></a>必要條件
在您可以交換 X12 訊息之前，您必須先建立 X12 合約，並將它儲存在您的整合帳戶中。 下列步驟將逐步引導您完成建立 X12 合約的程序。

* 在 Azure 訂用帳戶中定義一個[整合帳戶](../logic-apps/logic-apps-enterprise-integration-accounts.md)  
* 企業識別下至少兩個已搭配 EDI X12 辨識符號設定的[合作夥伴](../logic-apps/logic-apps-enterprise-integration-partners.md)。   
* 必要的[結構描述](../logic-apps/logic-apps-enterprise-integration-schemas.md)必須已上傳到[整合帳戶](../logic-apps/logic-apps-enterprise-integration-accounts.md)

## <a name="create-an-x12-agreement"></a>建立 X12 合約
在您登入 [Azure 入口網站](http://portal.azure.com "Azure 入口網站")之後：  

1. 登入 [Azure 入口網站](http://portal.azure.com "Azure 入口網站")
2. 選取 [更多服務]，然後在篩選搜尋方塊中輸入**整合**。 從結果清單選取 [整合帳戶]：    
![](./media/logic-apps-enterprise-integration-agreements/overview-1.png)    
3. 選取要將憑證新增到其中的整合帳戶：    
![](./media/logic-apps-enterprise-integration-overview/overview-3.png)   
4. 選取 [合約] 圖格。 如果您沒有看到 [合約] 圖格，請先新增它：     
![](./media/logic-apps-enterprise-integration-agreements/agreement-1.png)   
5. 在開啟的 [合約] 刀鋒視窗中選取 [新增]  按鈕。   
![](./media/logic-apps-enterprise-integration-agreements/agreement-2.png)     
6. 在開啟的 [合約] 刀鋒視窗中，輸入合約的 [名稱]，然後選取 [合約類型]、[主控夥伴]、[主控身分識別]、[來賓夥伴]、[來賓身分識別]。    
![](./media/logic-apps-enterprise-integration-x12/x12-1.png)  

| 屬性 | 說明 |
| --- | --- |
| 名稱 |合約的名稱 |
| 合約類型 | 應該是 X12 |
| 主控夥伴 |合約需要主控夥伴和來賓夥伴。 主機合作夥伴代表設定合約的組織 |
| 主控身分識別 |主機合作夥伴的識別碼 |
| 來賓夥伴 |合約需要主控夥伴和來賓夥伴。 來賓合作夥伴代表與主機合作夥伴有生意往來的組織 |
| 來賓身分識別 |來賓合作夥伴的識別碼 |
| 接收設定 |這些屬性會套用到合約所接收的所有訊息 |
| 傳送設定 |這些屬性會套用到合約所傳送的所有訊息 |  

> [!NOTE]
> X12 合約的解析取決於比對合作夥伴與內送郵件中定義的傳送者辨識符號與識別碼，以及接收者辨識符號與識別碼。  若合作夥伴方的這些值有所變更，請一併編輯合約。
> 
> 

## <a name="receive-settings"></a>接收設定

1. 選取 [接收設定]  ，來設定處理透過此合約所接收訊息的方式。  
2. [接收設定] 控制項分成下列各區段，包括識別項、通知、結構描述、信封、控制編號、驗證和內部設定。 根據您的合約，以及您將與其交換訊息的夥伴，設定這些屬性。 以下將檢視這些控制項，請根據您希望此合約如何識別並處理內送訊息進行設定  

### <a name="identifiers"></a>識別項

![](./media/logic-apps-enterprise-integration-x12/x12-2.png)  

| 屬性 | 說明 |
| --- | --- |
| ISA1 (授權辨識符號) |從下拉式清單中選取授權辨識符號值。 |
| ISA2 |選用。 輸入授權資訊值。 如果您為 ISA1 輸入的值是 00 以外的值，請最少輸入 1 個，最多 10 個英數字元。 |
| ISA3 (安全性辨識符號) |從下拉式清單中選取安全性辨識符號值。 |
| ISA4 |選用。 輸入安全性資訊值。 如果您為 ISA3 輸入的值是 00 以外的值，請最少輸入 1 個，最多 10 個英數字元。 |

### <a name="acknowledgments"></a>通知

![](./media/logic-apps-enterprise-integration-x12/x12-3.png) 

| 屬性 | 說明 |
| --- | --- |
| 預期 TA1 |將技術通知傳回給交換傳送者 |
| 預期 FA |將功能通知傳回給交換傳送者。 接著，根據結構描述版本，選取您想要 997 或 999 通知 |
| 包含 AK2/IK2 迴圈 |在功能通知中針對已接受的交易集啟用 AK2 迴圈的產生 |


### <a name="schemas"></a>結構描述
選擇每個交易類型 (ST1) 和傳送者應用程式 (GS2) 的結構描述。 接收管線會比對內送訊息中 ST1 和 GS2 的值與您在此處設定的值，以及比對內送訊息的結構描述與您在此處設定的結構描述，來解譯內送訊息。

![](./media/logic-apps-enterprise-integration-x12/x12-33.png) 

| 屬性 | 說明 |
| --- | --- |
| 版本 |選取 X12 版本 |
| 交易類型 (ST01) |選取交易類型 |
| 傳送者應用程式 (GS02) |選取傳送者應用程式 |
| 結構描述 |選取您要使用的結構描述檔案。 結構描述已新增到您的整合帳戶 |

> [!NOTE]
> 設定以上傳到[整合帳戶](../logic-apps/logic-apps-enterprise-integration-accounts.md)的必要[結構描述](../logic-apps/logic-apps-enterprise-integration-schemas.md)
> 
> 

### <a name="envelopes"></a>信封

![](./media/logic-apps-enterprise-integration-x12/x12-34.png) 

| 屬性 | 說明 |
| --- | --- |
| ISA11 使用方法 |使用此欄位來指定交易集中的分隔符號︰</br></br>選取 [標準識別項]，以使用小數點標記 “.” 而不是 EDI 接收管線中內送文件的小數點標記。 而不是 EDI 接收管線中內送文件的小數點標記。</br></br>選取 [重複分隔符號]，以指定重複出現簡單資料元素或重複資料結構的分隔符號。 例如，(^) 通常會用來做為重複分隔符號。 針對 HIPAA 結構描述，您只能使用 (^)。 |

### <a name="control-numbers"></a>控制編號

![](./media/logic-apps-enterprise-integration-x12/x12-35.png) 

| 屬性 | 說明 |
| --- | --- |
| 不允許交換控制編號重複 |封鎖重複的交易。 檢查已接收之交換控制編號的交換控制編號 (ISA13)。 如果偵測到相符項目，接收管線就不會處理交換。 您可以為 [檢查 ISA13 是否重複的天數間隔] 提供適當的值，指定執行檢查的天數 |
| 不允許群組控制編號重複 |封鎖有重複群組控制編號的交換 |
| 不允許交易集控制編號重複 |封鎖有重複交易集控制編號的交換 |

### <a name="validations"></a>驗證

![](./media/logic-apps-enterprise-integration-x12/x12-36.png) 

| 屬性 | 說明 |
| --- | --- |
| 訊息類型 |EDI 訊息類型，如 850 採購單或 999 實作通知。 |
| EDI 驗證 |依照結構描述、長度限制、空白資料元素和尾端分隔符號的 EDI 屬性定義在資料類型上執行 EDI 驗證。 |
| 擴充驗證 |如果資料類型不是 EDI，則在資料元素要求時才進行驗證，且允許重複、列舉和資料元素長度驗證 (最小/最大)。 |
| 允許前置/尾端零 |保留任何前置或尾端的額外空格和零字元， 不會將它們移除。 |
| 尾端分隔符號原則 |接收交換時產生尾端分隔符號。 選項包括 [不允許]、[選擇性] 以及 [強制]。 |

### <a name="internal-settings"></a>內部設定

![](./media/logic-apps-enterprise-integration-x12/x12-37.png) 

| 屬性 | 說明 |
| --- | --- |
| 將隱含的小數格式 Nn 轉換為 10 進制數值 |將使用 Nn 格式指定的 EDI 數字轉換為&10; 進制數值 |
| 如果允許尾端分隔符號，則建立空的 XML 標籤 |選取此核取方塊，讓交換傳送者在尾端分隔符號包含空的 XML 標籤。 |
| 將交換分割為交易集 - 發生錯誤時暫停交易集|套用適當的信封至交易集，將交換中每個交易集剖析為個別的 XML 文件。 只暫停那些發生驗證失敗的交易 |
| 將交換分割為交易集 - 發生錯誤時暫停交換|套用適當的信封，將交換中每個交易集剖析為個別的 XML 文件。 如果交換中有一或多個交易集無法通過驗證，則暫停整個交換 | 
| 保留交換 - 發生錯誤時暫停交易集 |讓交換維持不變，建立整個批次交換的 XML 文件。 只暫停未通過驗證的交易集，而繼續處理所有其他交易集 |
| 保留交換 - 發生錯誤時暫停交換 |讓交換維持不變，建立整個批次交換的 XML 文件。  如果交換中有一或多個交易集無法通過驗證，則暫停整個交換 |

設定接收設定屬性之後，選取 [確定] 按鈕  
   
您的合約已經準備好處理符合您所選取結構描述的內送訊息。

## <a name="send-settings"></a>傳送設定

1. 選取 [傳送設定]  ，以設定如何處理透過此合約傳送的訊息。  

2. [傳送設定] 控制項分成下列各區段，包括識別項、通知、結構描述、信封、控制編號、字元集和分隔符號，以及驗證。  根據您的合約，以及您將與其交換訊息的夥伴，設定這些屬性。 以下將檢視這些控制項，請根據您希望此合約如何識別並處理外送訊息進行設定。


### <a name="identifiers"></a>識別項

![](./media/logic-apps-enterprise-integration-x12/x12-4.png)  

| 屬性 | 說明 |
| --- | --- |
| 授權辨識符號 (ISA1) |從下拉式清單中選取授權辨識符號值。 |
| ISA2 |輸入授權資訊值。 如果此值不是 00，則請最少輸入 1 個，最多 10 個英數字元。 |
| 安全性辨識符號 (ISA3) |從下拉式清單中選取安全性辨識符號值。 |
| ISA4 |輸入安全性資訊值。 如果此值不是 00，則在 [值 (ISA4)] 文字方塊中，請最少輸入 1 個，最多 10 個英數字元值。 |

### <a name="acknowledgment"></a>通知

![](./media/logic-apps-enterprise-integration-x12/x12-5.png)  

| 屬性 | 說明 |
| --- | --- |
| 預期 TA1 |選取此核取方塊，將技術 (TA1) 通知傳回給交換傳送者。 此設定指定傳送訊息的主機合作夥伴向合約中的來賓合作夥伴要求通知。 主控夥伴根據合約的「接收設定」，預期有這些通知。 |
| 預期 FA |選取此核取方塊，將功能 (FA) 通知傳回給交換傳送者，然後根據您正在使用的結構描述版本，選取您想要 997 或 999 通知。 主控夥伴根據合約的「接收設定」，預期有這些通知。 |
| FA 版本 |選取 FA 版本 |

### <a name="schemas"></a>結構描述

![](./media/logic-apps-enterprise-integration-x12/x12-5.png)  

| 屬性 | 說明 |
| --- | --- |
| 版本 |選取 X12 版本 |
| 交易類型 (ST01) |選取交易類型 |
| 結構描述 |選取要使用的結構描述。 結構描述位於您的整合帳戶中。 若先選取結構描述，它會自動設定版本與交易類型  |

> [!NOTE]
> 設定以上傳到[整合帳戶](../logic-apps/logic-apps-enterprise-integration-accounts.md)的必要[結構描述](../logic-apps/logic-apps-enterprise-integration-schemas.md)
> 
> 

### <a name="envelopes"></a>信封

![](./media/logic-apps-enterprise-integration-x12/x12-6.png) 

| 屬性 | 說明 |
| --- | --- |
| ISA11 使用方法 |使用此欄位來指定交易中的分隔符號 |
| 標準識別項 |選取 [標準識別項]，以使用小數點標記 “.” 而不是 EDI 接收管線中內送文件的小數點標記。 |
| 重複分隔符號 |選取 [重複分隔符號]，以指定重複出現簡單資料元素或重複資料結構的分隔符號。 例如，(^) 通常會用來做為重複分隔符號。 針對 HIPAA 結構描述，您只能使用 (^) |

### <a name="control-numbers"></a>控制編號

![](./media/logic-apps-enterprise-integration-x12/x12-8.png) 

| 屬性 | 說明 |
| --- | --- |
| 控制版本編號 (ISA12) |選取 X12 標準的版本 |
| 使用狀況指示符號 (ISA15) |選取交換的內容。  值是資訊、生產資料或測試資料 |
| 結構描述 |產生 X12 編碼交換的 GS 和 ST 區段，它會將這些區段傳送至「傳送管線」 |
| GS1 |選擇性，請從下拉式清單選取功能代碼的值 |
| GS2 |選擇性，應用程式寄件者 |
| GS3 |選擇性，應用程式接收者 |
| GS4 |選擇性，請選取 CCYYMMDD 或 YYMMDD |
| GS5 |選擇性，請選取 HHMM、HHMMSS 或 HHMMSSdd |
| GS7 |選擇性，請從下拉式清單選取負責單位的值 |
| GS8 |選擇性，文件的版本 |
| 交換控制編號 (ISA13) |必要，輸入交換控制編號的值範圍。 請輸入最小為 1，最大為 999999999 的數值 |
| 群組控制編號 (GS06) |必要，請輸入群組控制編號的數字範圍。 請輸入最小為 1，最大為 999999999 的數值 |
| 交易集控制編號 (ST02) |必要，請輸入交易集控制編號的數字範圍。 請輸入最小為 1，最大為 999999999 的數值範圍 |
| 前置詞 |選擇性，針對在通知中使用的交易集控制編號範圍指定。 在中間的兩個欄位輸入數值，在前置詞和尾碼欄位輸入英數字元值 (如有需要)。 中間欄位是必要欄位，而且包含控制編號的最小值和最大值 |
| 尾碼 |選擇性，針對在通知中使用的交易集控制編號範圍指定。 在中間的兩個欄位輸入數值，在前置詞和尾碼欄位輸入英數字元值 (如有需要)。 中間欄位是必要欄位，而且包含控制編號的最小值和最大值 |

### <a name="character-sets-and-separators"></a>字元集和分隔符號

除了字元集，您還可以為每個訊息類型輸入一組不同的分隔符號。 如果指定的訊息結構描述未指定字元集，則會使用預設字元集。

![](./media/logic-apps-enterprise-integration-x12/x12-9.png) 


| 屬性 | 說明 |
| --- | --- |
| 要使用的字元集 |選取 X12 字元集來驗證屬性。  選項為 [基本]、[延伸] 與 [UTF8] |
| 結構描述 |從下拉式清單中選取結構描述。 針對選取的結構描述，選取要使用的分隔符號集 |
| 輸入類型 |從下拉式清單選取輸入類型 |
| 元件元素分隔符號 |輸入單一字元來分隔複合資料元素 |
| 資料元素分隔符號 |輸入單一字元來分隔複合資料元素內的簡單資料元素 |
| 取代字元 |輸入取代字元。 當產生輸出 X12 訊息時，承載資料中分隔字元的所有執行個體都會被取代為指定的字元 |
| 區段結束字元 |輸入單一字元以指出 EDI 區段的結尾 |
| 尾碼 |選取與區段識別項一起使用的字元。 如果指定尾碼，則區段結束字元資料元素可以空白。 如果區段結束字元留空，則必須指定尾碼。 |

### <a name="validation"></a>驗證

![](./media/logic-apps-enterprise-integration-x12/x12-10.png) 

| 屬性 | 說明 |
| --- | --- |
| 訊息類型 |從清單選取訊息類型 |
| EDI 驗證 |選取此選項可對交換接收者進行驗證。 這項驗證會對交易集資料元素執行 EDI 驗證 (驗證資料類型、長度限制與空白資料元素和尾端分隔符號) |
| 擴充驗證 |選取此選項可讓交換傳送者接收交換的擴充驗證。 除了 XSD 資料類型驗證，還包括驗證欄位長度、選擇性和重複計數。 您可以啟用擴充驗證而不啟用 EDI 驗證，反之亦然。 |
| 允許前置/尾端零 |選取此選項指定，如果 EDI 交換中的資料元素因為有尾端空格而不符合其長度要求，但移除後就符合長度要求，則從合作對象接收的 EDI 交換會通過驗證。 |
| 尾端分隔符號 |選取此選項可指定，如果 EDI 交換中的資料元素因為有前置 (或尾端) 零或尾端空格而不符合其長度要求，但移除後就符合長度要求，則從合作對象接收的 EDI 交換會通過驗證。</br></br>如果不想允許從交換傳送者接收的交換中有尾端分隔符號，請選取 [不允許]。 如果交換包含尾端分隔符號，則會被宣告為無效。</br></br>選取 [選擇性] 以接受包含或不含尾端分隔符號的交換。</br></br>如果收到的交換必須包含尾端分隔符號，選取 [強制性]。 |

設定傳送設定屬性之後，請選取 [確定] 按鈕。  您的合約已經準備好處理符合您所選取結構描述的外送訊息。

選取 [確定] 以建立合約。

在 [整合帳戶] 刀鋒視窗上選取 [合約] 圖格，而您將會看到已列出新加入的合約。  
![](./media/logic-apps-enterprise-integration-x12/x12-7.png)   

## <a name="learn-more"></a>詳細資訊
* [深入了解企業整合套件](../logic-apps/logic-apps-enterprise-integration-overview.md "了解企業整合套件")  




<!--HONumber=Feb17_HO1-->


