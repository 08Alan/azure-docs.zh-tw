---
title: "X12 與企業整合套件的概觀 | Microsoft Docs"
description: "了解如何使用 X12 合約來建立 Logic Apps"
services: logic-apps
documentationcenter: .net,nodejs,java
author: msftman
manager: erikre
editor: cgronlun
ms.assetid: 7422d2d5-b1c7-4a11-8c9b-0d8cfa463164
ms.service: app-service-logic
ms.workload: integration
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/08/2016
ms.author: deonhe
translationtype: Human Translation
ms.sourcegitcommit: 219dcbfdca145bedb570eb9ef747ee00cc0342eb
ms.openlocfilehash: b3e2a24e91bff8bd6edae69fe97931947ab35459


---
# <a name="enterprise-integration-with-x12"></a>具備 X12 的企業整合
> [!NOTE]
> 本頁涵蓋 Logic Apps 的 X12 功能。 如需 EDIFACT 的詳細資訊，請按一下 [這裡](app-service-logic-enterprise-integration-edifact.md)。
> 
> 

## <a name="create-an-x12-agreement"></a>建立 X12 合約
在您可以交換 X12 訊息之前，您必須先建立 X12 合約，並將它儲存在您的整合帳戶中。 下列步驟將逐步引導您完成建立 X12 合約的程序。

### <a name="heres-what-you-need-before-you-get-started"></a>以下是您在開始之前的必要條件
* 在 Azure 訂用帳戶中定義一個[整合帳戶](app-service-logic-enterprise-integration-accounts.md)  
* 至少已經在整合帳戶中定義兩個[夥伴](app-service-logic-enterprise-integration-partners.md)  

> [!NOTE]
> 建立合約時，合約檔案中的內容必須與合約類型相符。    
> 
> 

當您[建立整合帳戶](app-service-logic-enterprise-integration-accounts.md)並[新增夥伴](app-service-logic-enterprise-integration-partners.md)之後，您可以依照下列步驟來建立 X12 合約：  

### <a name="from-the-azure-portal-home-page"></a>從 Azure 入口網站首頁
在您登入 [Azure 入口網站](http://portal.azure.com "Azure 入口網站")之後：  

1. 從左邊功能表選取 [瀏覽]  。  

> [!TIP]
> 如果您沒有看到 [瀏覽] 連結，可能需要先展開功能表。 選取摺疊功能表左上方的 [顯示功能表]  連結，來執行此動作。  
> 
> 

![](./media/app-service-logic-enterprise-integration-overview/overview-1.png)    

1. 在篩選搜尋方塊中輸入「整合」，然後從結果清單中選取 [整合帳戶]。       
   ![](./media/app-service-logic-enterprise-integration-x12/x12-1-3.png)    
2. 在開啟的 [整合帳戶]  刀鋒視窗中，選取您要在其中建立合約的整合帳戶。 如果您沒有看到任何整合帳戶清單，請[先建立一個](app-service-logic-enterprise-integration-accounts.md "All about integration accounts")。  
   ![](./media/app-service-logic-enterprise-integration-x12/x12-1-4.png)  
3. 選取 [合約]  圖格。 如果您沒有看到 [合約] 圖格，請先進行新增。   
   ![](./media/app-service-logic-enterprise-integration-x12/x12-1-5.png)     
4. 在開啟的 [合約] 刀鋒視窗中選取 [新增]  按鈕。  
   ![](./media/app-service-logic-enterprise-integration-agreements/agreement-2.png)  
5. 在開啟的 [合約] 刀鋒視窗中，輸入合約的 [名稱]，然後選取 [合約類型]、[主控夥伴]、[主控身分識別]、[來賓夥伴]、[來賓身分識別]。  
   ![](./media/app-service-logic-enterprise-integration-x12/x12-1.png)  
6. 設定接收設定屬性之後，選取 [確定] 按鈕  
   讓我們繼續：  
7. 選取 [接收設定]  ，來設定處理透過此合約所接收訊息的方式。  
8. [接收設定] 控制項分成下列各區段，包括識別項、通知、結構描述、信封、控制編號、驗證和內部設定。 根據您的合約，以及您將交換訊息的夥伴，設定這些屬性。 以下將檢視這些控制項，請根據您希望此合約如何識別並處理內送訊息進行設定︰  
   ![](./media/app-service-logic-enterprise-integration-x12/x12-2.png)  

![](./media/app-service-logic-enterprise-integration-x12/x12-3.png)  

1. 選取 [確定]  按鈕以儲存您的設定。  

### <a name="identifiers"></a>識別項
| 屬性 | 說明 |
| --- | --- |
| ISA1 (授權辨識符號) |從下拉式清單中選取授權辨識符號值。 |
| ISA2 |選用。 輸入授權資訊值。 如果您為 ISA1 輸入的值是 00 以外的值，請最少輸入 1 個，最多 10 個英數字元。 |
| ISA3 (安全性辨識符號) |從下拉式清單中選取安全性辨識符號值。 |
| ISA4 |選用。 輸入安全性資訊值。 如果您為 ISA3 輸入的值是 00 以外的值，請最少輸入 1 個，最多 10 個英數字元。 |

### <a name="acknowledgments"></a>通知
| 屬性 | 說明 |
| --- | --- |
| 預期 TA1 |選取此核取方塊，將技術 (TA1) 通知傳回給交換傳送者。 這些通知會根據合約的傳送設定傳送給交換傳送者。 |
| 預期 FA |選取此核取方塊，將功能 (FA) 通知傳回給交換傳送者。 然後根據您正在使用的結構描述版本，選取您想要 997 或 999 通知。 這些通知會根據合約的傳送設定傳送給交換傳送者。 |
| 包含 AK2/IK2 迴圈 |選取此核取方塊，在功能通知中為接受的交易集產生 AK2 迴圈。附註︰只有當您選取 [預期 FA] 核取方塊，才會啟用此核取方塊。 |

### <a name="schemas"></a>結構描述
選擇每個交易類型 (ST1) 和傳送者應用程式 (GS2) 的結構描述。 接收管線會比對內送訊息中 ST1 和 GS2 的值與您在此處設定的值，以及比對內送訊息的結構描述與您在此處設定的結構描述，來解譯內送訊息。

| 屬性 | 說明 |
| --- | --- |
| 版本 |選取 X12 版本 |
| 交易類型 (ST01) |選取交易類型 |
| 傳送者應用程式 (GS02) |選取傳送者應用程式 |
| 結構描述 |選取您要使用的結構描述檔案。 結構描述檔案位於您的整合帳戶中。 |

### <a name="envelopes"></a>信封
| 屬性 | 說明 |
| --- | --- |
| ISA11 使用方法 |使用此欄位來指定交易集中的分隔符號︰</br></br>選取 [標準識別項]，以使用小數點標記 “.” 而不是 EDI 接收管線中內送文件的小數點標記。 而不是 EDI 接收管線中內送文件的小數點標記。</br></br>選取 [重複分隔符號]，以指定重複出現簡單資料元素或重複資料結構的分隔符號。 例如，(^) 通常會用來做為重複分隔符號。 針對 HIPAA 結構描述，您只能使用 (^)。 |

### <a name="control-numbers"></a>控制編號
| 屬性 | 說明 |
| --- | --- |
| 不允許交換控制編號重複 |核取此選項可封鎖重複的交換。 如果選取，BizTalk 服務入口網站會檢查所接收交換的交換控制編號 (ISA13) 是否不符合交換控制編號。 如果偵測到相符項目，接收管線就不會處理交換。<br/>如果您選擇不允許重複的交換控制編號，您可以在 [每隔 x 天檢查是否有重複的 ISA13] 中提供適當的值，指定執行檢查的天數。 |
| 不允許群組控制編號重複 |核取此選項可封鎖有重複群組控制編號的交換。 |
| 不允許交易集控制編號重複 |核取此選項可封鎖有重複交易集控制編號的交換。 |

### <a name="validations"></a>驗證
| 屬性 | 說明 |
| --- | --- |
| 訊息類型 |EDI 訊息類型，如 850 採購單或 999 實作通知。 |
| EDI 驗證 |依照結構描述、長度限制、空白資料元素和尾端分隔符號的 EDI 屬性定義在資料類型上執行 EDI 驗證。 |
| 擴充驗證 |如果資料類型不是 EDI，則在資料元素要求時才進行驗證，且允許重複、列舉和資料元素長度驗證 (最小/最大)。 |
| 允許前置/尾端零 |保留任何前置或尾端的額外空格和零字元， 不會將它們移除。 |
| 尾端分隔符號原則 |接收交換時產生尾端分隔符號。 選項包括 [不允許]、[選擇性] 以及 [強制]。 |

### <a name="internal-settings"></a>內部設定
| 屬性 | 說明 |
| --- | --- |
| 將隱含的小數格式 Nn 轉換為 10 進制數值 |在 BizTalk 服務入口網站中的中繼 XML，將使用 Nn 格式指定的 EDI 數字轉換為 10 進制數值。 |
| 如果允許尾端分隔符號，則建立空的 XML 標籤 |選取此核取方塊，讓交換傳送者在尾端分隔符號包含空的 XML 標籤。 |
| 輸入批次處理 |將交換分割為交易集 - 暫停發生錯誤的交易集︰將適當的信封套用至交易集，將交換中每個交易集剖析為個別的 XML 文件。 使用此選項時，如果交換中有一或多個交易集無法通過驗證，則 BizTalk 服務只會暫停那些交易集。 </br></br>將交換分割為交易集 - 暫停發生錯誤的交換︰套用適當的信封，將交換中每個交易集剖析為個別的 XML 文件。 使用此選項時，如果交換中有一或多個交易集無法通過驗證，則 BizTalk 服務會暫停整個交換。</br></br>保留交換 - 發生錯誤時暫停交易集︰交換維持不變，建立整個批次交換的 XML 文件。 使用此選項時，如果交換中有一或多個交易集無法通過驗證，則 BizTalk 服務只會暫停那些交易集，同時繼續處理其他所有交易集。</br></br>保留交換 - 發生錯誤時暫停交換︰交換維持不變，建立整個批次交換的 XML 文件。 使用此選項時，如果交換中有一或多個交易集無法通過驗證，則 BizTalk 服務會暫停整個交換。</br></br> |

您的合約已經準備好處理符合您所選取結構描述的內送訊息。

設定如何處理傳送給夥伴的訊息︰  

1. 選取 [傳送設定]  ，以設定如何處理透過此合約傳送的訊息。  

[傳送設定] 控制項分成下列各區段，包括識別項、通知、結構描述、信封、控制編號、字元集和分隔符號，以及驗證。 

以下將檢視這些控制項。 請根據您要如何處理透過此合約傳送給夥伴的訊息來選取︰   
![](./media/app-service-logic-enterprise-integration-x12/x12-4.png)  

![](./media/app-service-logic-enterprise-integration-x12/x12-5.png)  

![](./media/app-service-logic-enterprise-integration-x12/x12-6.png)  

1. 選取 [確定]  按鈕以儲存您的設定。  

### <a name="identifiers"></a>識別項
| 屬性 | 說明 |
| --- | --- |
| 授權辨識符號 (ISA1) |從下拉式清單中選取授權辨識符號值。 |
| ISA2 |輸入授權資訊值。 如果此值不是 00，則請最少輸入 1 個，最多 10 個英數字元。 |
| 安全性辨識符號 (ISA3) |從下拉式清單中選取安全性辨識符號值。 |
| ISA4 |輸入安全性資訊值。 如果此值不是 00，則在 [值 (ISA4)] 文字方塊中，請最少輸入 1 個，最多 10 個英數字元值。 |

### <a name="acknowledgment"></a>通知
| 屬性 | 說明 |
| --- | --- |
| 預期 TA1 |選取此核取方塊，將技術 (TA1) 通知傳回給交換傳送者。 此設定指定傳送訊息的主控夥伴向合約中的來賓夥伴要求通知。 主控夥伴根據合約的「接收設定」，預期有這些通知。 |
| 預期 FA |選取此核取方塊，將功能 (FA) 通知傳回給交換傳送者，然後根據您正在使用的結構描述版本，選取您想要 997 或 999 通知。 主控夥伴根據合約的「接收設定」，預期有這些通知。 |
| FA 版本 |選取 FA 版本 |

### <a name="schemas"></a>結構描述
| 屬性 | 說明 |
| --- | --- |
| 版本 |選取 X12 版本 |
| 交易類型 (ST01) |選取交易類型 |
| 結構描述 |選取要使用的結構描述。 結構描述位於您的整合帳戶中。 若要存取結構描述，請先將整合帳戶連結至邏輯應用程式。 |

### <a name="envelopes"></a>信封
| 屬性 | 說明 |
| --- | --- |
| ISA11 使用方法 |使用此欄位來指定交易集中的分隔符號︰</br></br>選取 [標準識別項]，以使用小數點標記 “.” 而不是 EDI 接收管線中內送文件的小數點標記。 而不是 EDI 接收管線中內送文件的小數點標記。</br></br>選取 [重複分隔符號]，以指定重複出現簡單資料元素或重複資料結構的分隔符號。 例如，(^) 通常會用來做為重複分隔符號。 針對 HIPAA 結構描述，您只能使用 (^)。</br> |
| 重複分隔符號 |輸入重複分隔符號 |
| 控制版本編號 (ISA12) |選取 BizTalk 服務入口網站用來產生外送交換的 X12 標準版本。 |
| 使用狀況指示符號 (ISA15) |輸入交換的內容為資訊 (I)、產品資料 (P)，或測試資料 (T)。 EDI 接收管線會將此屬性升級為內容。 |
| 結構描述 |您可以輸入 BizTalk 服務入口網站如何產生 X12 編碼交換的 GS 和 ST 區段，它會將這些區段傳送至「傳送管線」。</br></br>您可以將 GS1、GS2、GS3、GS4、GS5、GS7 與 GS8 資料元素值與 [交易類型] 和 [版本/版次] 資料元素的值產生關聯。 當 BizTalk 服務入口網站判斷 XML 訊息中在某列格線中有設定交易類型與版本/版次的值，則會在外送交換信封中的 GS1、GS2、GS3、GS4、GS5、GS7 和 GS8 資料元素填入相同格線列的值。 [交易類型] 與 [版本/版次] 元素的值必須是唯一。</br></br>選用。 針對 GS1，請從下拉式清單中選取功能代碼的值。</br></br>必要。 針對 GS2，請輸入應用程式傳送者的英數字元值，最少 2 個字元，最多 15 個字元。</br></br>必要。 針對 GS3，請輸入應用程式接收者的英數字元值，最少 2 個字元，最多 15 個字元。</br></br>選用。 針對 GS4，請選取 CCYYMMDD 或 YYMMDD。</br></br>選用。 針對 GS5，請選取 HHMM、HHMMSS 或 HHMMSSdd。</br></br>選用。 針對 GS7，請從下拉式清單中選取負責單位的值。</br></br>選用。 針對 GS8，請輸入所識別文件的英數字元值，最少 1 個字元，最多 12 個字元。</br></br>**注意**︰如果相同資料列中的 [交易類型] 和 [版本/版次] 元素符合與交換相關聯的值，BizTalk 服務入口網站就會在所建立交換的 GS 欄位中輸入這些值。 |

### <a name="control-numbers"></a>控制編號
| 屬性 | 說明 |
| --- | --- |
| 交換控制編號 (ISA13) |必要。 輸入 BizTalk 服務入口網站產生外送交換時所使用的交換控制編號值範圍。 請輸入最少為 1，最大為 999999999 的數值。 |
| 群組控制編號 (GS06) |必要。 輸入 BizTalk 服務入口網站應用於群組控制編號的數字範圍。 請輸入最少 1 個字元，最多 9 個字元的數值。 |
| 交易集控制編號 (ST02) |針對交易集控制編號 (ST02)，在必要的中間欄位輸入一個範圍的數值，在選擇性的前置詞和尾碼輸入英數字元值。 所有四個欄位的長度上限都是 9 個字元。 |
| 前置詞 |若要指定通知中使用的交易集控制編號範圍，請在 [ACK 控制編號 (ST02)] 欄位中輸入值。 在中間的兩個欄位輸入數值，在前置詞和尾碼欄位輸入英數字元值 (如有需要)。 中間欄位是必要欄位，而且包含控制編號的最小值和最大值，前置詞和尾碼則是選擇性的欄位。 所有三個欄位的長度上限都是 9 個字元。 |
| 尾碼 |若要指定通知中使用的交易集控制編號範圍，請在 [ACK 控制編號 (ST02)] 欄位中輸入值。 在中間的兩個欄位輸入數值，在前置詞和尾碼欄位輸入英數字元值 (如有需要)。 中間欄位是必要欄位，而且包含控制編號的最小值和最大值，前置詞和尾碼則是選擇性的欄位。 所有三個欄位的長度上限都是 9 個字元。 |

### <a name="character-sets-and-separators"></a>字元集和分隔符號
除了字元集，您還可以為每個訊息類型輸入一組不同的分隔符號。 如果指定的訊息結構描述未指定字元集，則會使用預設字元集。

| 屬性 | 說明 |
| --- | --- |
| 要使用的字元集 |選取 X12 字元集來驗證您輸入的合約屬性。</br></br>**注意**：BizTalk 服務入口網站只會使用此設定來驗證為相關合約屬性所輸入的值。 接收管線或傳送管線在進行執行階段處理時會忽略此字元集屬性。 |
| 結構描述 |選取 (+) 符號，然後從下拉式清單中選取結構描述。 針對選取的結構描述，選取要使用的分隔符號集︰</br></br>元件元素分隔符號 – 輸入單一字元來分隔複合資料元素。</br></br>資料元素分隔符號 – 輸入單一字元來分隔複合資料元素內的簡單資料元素。</br></br></br></br>取代字元 – 如果的承載資料中也有字元當作資料、區段或元件分隔符號，請選取此核取方塊。 然後，您可以輸入取代字元。 當產生輸出 X12 訊息時，承載資料中分隔字元的所有執行個體會取代為指定的字元。</br></br>區段結束字元 – 輸入單一字元以指出 EDI 區段的結尾。</br></br>後置詞 – 選取與區段識別項一起使用的字元。 如果指定尾碼，則區段結束字元資料元素可以空白。 如果區段結束字元留空，則必須指定尾碼。 |

### <a name="validation"></a>驗證
| 屬性 | 說明 |
| --- | --- |
| 訊息類型 |選取此選項可對交換接收者進行驗證。 這項驗證會對交易集資料元素、驗證資料類型、長度限制、空白資料元素和尾端分隔符號執行 EDI 驗證。 |
| EDI 驗證 | |
| 擴充驗證 |選取此選項可讓交換傳送者接收交換的擴充驗證。 除了 XSD 資料類型驗證，還包括驗證欄位長度、選擇性和重複計數。 您可以啟用擴充驗證而不啟用 EDI 驗證，反之亦然。 |
| 允許前置/尾端零 |選取此選項指定，如果 EDI 交換中的資料元素因為有尾端空格而不符合其長度要求，但移除後就符合長度要求，則從合作對象接收的 EDI 交換會通過驗證。 |
| 尾端分隔符號 |選取此選項可指定，如果 EDI 交換中的資料元素因為有前置 (或尾端) 零或尾端空格而不符合其長度要求，但移除後就符合長度要求，則從合作對象接收的 EDI 交換會通過驗證。</br></br>如果不想允許從交換傳送者接收的交換中有尾端分隔符號，請選取 [不允許]。 如果交換包含尾端分隔符號，則會被宣告為無效。</br></br>選取 [選擇性] 以接受包含或不含尾端分隔符號的交換。</br></br>如果收到的交換必須包含尾端分隔符號，選取 [強制性]。 |

在開啟的刀鋒視窗上選取 [確定]  之後︰  

1. 在 [整合帳戶] 刀鋒視窗上選取 [合約]  圖格，而您將會看到已列出新加入的合約。  
   ![](./media/app-service-logic-enterprise-integration-x12/x12-7.png)   

## <a name="learn-more"></a>詳細資訊
* [深入了解企業整合套件](app-service-logic-enterprise-integration-overview.md "了解企業整合套件")  




<!--HONumber=Nov16_HO3-->


