<properties 
	pageTitle="具備 EDIFACT 的企業整合 | Microsoft Azure" 
	description="了解如何使用 EDIFACT 合約來建立 Logic Apps" 
	services="app-service\logic" 
	documentationCenter=".net,nodejs,java"
	authors="jeffhollan" 
	manager="erikre" 
	editor="cgronlun"/>

<tags 
	ms.service="app-service-logic" 
	ms.workload="integration" 
	ms.tgt_pltfrm="na" 
	ms.devlang="na" 
	ms.topic="article" 
	ms.date="07/26/2016" 
	ms.author="jonfan"/>

# 具備 EDIFACT 的企業整合 

> [AZURE.NOTE] 本頁涵蓋 Logic Apps 的 EDIFACT 功能。如需 X12 的詳細資訊，請按一下[這裡](app-service-logic-enterprise-integration-x12.md)。

## 建立 EDIFACT 合約 
在您可以交換 EDIFACT 訊息之前，您必須先建立 EDIFACT 合約，並將它儲存在您的整合帳戶中。下列步驟將逐步引導您完成建立 EDIFACT 合約的程序。

### 以下是您在開始之前的必要條件
- 在 Azure 訂用帳戶中定義一個[整合帳戶](./app-service-logic-enterprise-integration-accounts.md)
- 至少已經在整合帳戶中定義兩個[夥伴](./app-service-logic-enterprise-integration-partners.md)

>[AZURE.NOTE]建立合約時，您將對合作夥伴接收/傳送之訊息中的內容必須與合約類型相符。


當您[建立整合帳戶](./app-service-logic-enterprise-integration-accounts.md)並[新增夥伴](./app-service-logic-enterprise-integration-partners.md)之後，您可以依照下列步驟來建立 EDIFACT 合約：

### 從 Azure 入口網站首頁

在您登入 [Azure 入口網站](http://portal.azure.com "Azure 入口網站")之後：
1. 從左邊功能表選取 [瀏覽]。

>[AZURE.TIP]如果您沒有看到 [瀏覽] 連結，可能需要先展開功能表。選取摺疊功能表左上方的 [顯示功能表] 連結，來執行此動作。

![](./media/app-service-logic-enterprise-integration-edifact/EDIFACT-0.png)
2. 在篩選搜尋方塊中輸入「整合」，然後從結果清單中選取 [整合帳戶]。![](./media/app-service-logic-enterprise-integration-edifact/EDIFACT-1-3.png)
3. 在開啟的 [整合帳戶] 刀鋒視窗中，選取您要在其中建立合約的整合帳戶。如果您沒有看到任何整合帳戶清單，請[先建立一個](./app-service-logic-enterprise-integration-accounts.md "所有與整合帳戶相關的資訊")。![](./media/app-service-logic-enterprise-integration-edifact/EDIFACT-1-4.png)
4.  選取 [合約] 圖格。如果您沒有看到 [合約] 圖格，請先進行新增。![](./media/app-service-logic-enterprise-integration-edifact/EDIFACT-1-5.png)
5. 在開啟的 [合約] 刀鋒視窗中選取 [新增] 按鈕。![](./media/app-service-logic-enterprise-integration-edifact/EDIFACT-agreement-2.png)
6. 在開啟的 [合約] 刀鋒視窗中，輸入合約的[名稱]，然後選取 EDIFACT 的 [合約類型]、[主控夥伴]、[主控身分識別]、[來賓夥伴]、[來賓身分識別]。![](./media/app-service-logic-enterprise-integration-edifact/EDIFACT-1.png)
7. 設定合約屬性後，請選取 [接收設定]，來設定處理透過此合約所接收訊息的方式。
8. [接收設定] 控制項分成下列各區段，包括識別項、通知、結構描述、控制編號、驗證、內部設定和 Batch 處理。根據您的合約，以及您將交換訊息的夥伴，設定這些屬性。以下將檢視這些控制項，請根據您希望此合約如何識別並處理內送訊息進行設定︰![](./media/app-service-logic-enterprise-integration-edifact/EDIFACT-2.png)
9. 選取 [確定] 按鈕以儲存您的設定。

### 識別項

|屬性|說明 |
|---|---|
|UNB6.1 (接收者參考密碼)|輸入範圍 1 到 14 個字元的英數字元值。|
|UNB6.2 (接收者參考辨識符號)|輸入最少 1 個字元，最多 2 個字元的英數字元值。|

### 通知 

|屬性|說明 |
|----|----|
|訊息回條 (CONTRL)|選取此核取方塊，將技術 (CONTRL) 通知傳回給交換傳送者。此通知會根據合約的傳送設定傳送給交換傳送者。|
|通知 (CONTRL)|選取此核取方塊，將功能 (CONTRL) 通知傳回給交換傳送者。此通知會根據合約的 [傳送設定] 傳送給交換傳送者。|

### 結構描述

|屬性|說明 |
|----|----|
|UNH2.1 (TYPE)|選取交易集類型。|
|UNH2.2 (VERSION)|輸入訊息版本號碼。(最少 1 個字元；最多 3 個字元)。|
|UNH2.3 (RELEASE)|輸入訊息版次號碼。(最少 1 個字元；最多 3 個字元)。|
|UNH2.5 (ASSOCIATED ASSIGNED CODE)|輸入指定的代碼。(最少 6 個字元。必須是英數字元)。|
|UNG2.1 (APP SENDER ID)|輸入最少 1 個字元，最多 35 個字元的英數字元值。|
|UNG2.2 (APP SENDER CODE QUALIFIER)|輸入最多 4 個字元的英數字元值。|
|結構描述|從相關聯的整合帳戶選取您要使用的先前上傳結構描述。|

### 控制編號

|屬性|說明 |
|----|----|
|不允許交換控制編號重複|選取此核取方塊可封鎖重複的交換。如果選取，EDIFACT 解碼動作會檢查所接收交換的交換控制編號 (UNB5) 是否不符合先前處理的交換控制編號。如果偵測到相符項目，則不會處理交換。
|每隔下列天數檢查是否有重複的 UNB5|如果您選擇不允許重複的交換控制編號，您可以在 [每隔下列天數檢查是否有重複的 UNB5] 選項提供適當的值，指定執行檢查的天數。|
|不允許群組控制編號重複|選取此核取方塊可封鎖有重複群組控制編號 (UNG5) 的交換。|
|不允許交易集控制編號重複|選取此核取方塊可封鎖有重複交易集控制編號 (UNH1) 的交換。|
|EDIFACT 通知控制編號|若要指定用於通知中的交易集參考編號，請輸入前置詞、參考編號範圍和後置詞的值。|

### 驗證

|屬性|說明 |
|----|----|
|訊息類型|指定訊息類型。隨著每個驗證資料列完成，將會自動加入另一個驗證資料列。如果未指定任何規則，則標示為預設值的資料列會用於驗證。|
|EDI 驗證|選取此核取方塊，依照結構描述、長度限制、空白資料元素和尾端分隔符號的 EDI 屬性定義，在資料類型上執行 EDI 驗證。|
|擴充驗證|選取此可核取方塊可讓交換傳送者接收交換的擴充 (XSD) 驗證。除了 XSD 資料類型驗證，還包括驗證欄位長度、選擇性和重複計數。|
|允許前置/尾端零|選取 [允許] 允許前置/尾端字元為零；選取 [不允許] 則不允許前置/尾端字元為零，或選取 [修剪] 來修剪前置和尾端零。|
|修剪前置/尾端零|選取此核取方塊可修剪任何前置或尾端零|
|尾端分隔符號原則|如果不想允許從交換傳送者接收的交換中有尾端分隔符號，選取 [不允許]。如果交換包含尾端分隔符號，則會被宣告為無效。選取 [選擇性] 以接受包含或不含尾端分隔符號的交換。如果收到的交換必須包含尾端分隔符號，選取 [強制性]。|

### 內部設定

|屬性|說明 |
|----|----|
|如果允許尾端分隔符號，則建立空的 XML 標籤|選取此核取方塊，讓交換傳送者在尾端分隔符號包含空的 XML 標籤。|
|輸入批次處理|選項包括：</br></br>**將交換分割為交易集 - 暫停發生錯誤的交易集**︰將適當的信封套用至交易集，將交換中每個交易集剖析為個別的 XML 文件。使用此選項時，如果交換中有一或多個交易集無法通過驗證，則只會暫停那些交易集。將交換分割為交易集 - 暫停發生錯誤的交換︰套用適當的信封，將交換中每個交易集剖析為個別的 XML 文件。使用此選項時，如果交換中有一或多個交易集無法通過驗證，則 BizTalk 服務會暫停整個交換。</br></br>**保留交換 - 暫停發生錯誤的交易集︰**讓交換保持完整，建立整個批次交換的 XML 文件。使用此選項時，如果交換中有一或多個交易集無法通過驗證，則只會暫停那些交易集，然而會處理其他所有交易集。</br></br>**保留交換 - 暫停發生錯誤的交換**︰讓交換保持完整，建立整個批次交換的 XML 文件。使用此選項時，如果交換中有一或多個交易集無法通過驗證，則會暫停整個交換。|

您的合約已經準備好處理符合您所選設定的內送訊息。

設定如何處理傳送給夥伴的訊息︰
10. 選取 [傳送設定]，以設定如何處理透過此合約傳送的訊息。

[傳送設定] 控制項分成下列各區段，包括識別項、通知、結構描述、信封、字元集和分隔符號、控制編號以及驗證。

以下將檢視這些控制項。請根據您要如何處理透過此合約傳送給夥伴的訊息來選取︰![](./media/app-service-logic-enterprise-integration-edifact/EDIFACT-3.png)
11. 選取 [確定] 按鈕以儲存您的設定。

### 識別項
|屬性|說明 |
|----|----|
|UNB1.2 (語法版本)|選取介於 **1** 到 **4** 之間的值。|
|UNB2.3 (傳送者反向路由位址)|輸入最少 1 個字元，最多 14 個字元的英數字元值。|
|UNB3.3 (接收者反向路由位址)|輸入最少 1 個字元，最多 14 個字元的英數字元值。|
|UNB6.1 (接收者參考密碼)|輸入最少 1 個字元，最多 14 個字元的英數字元值。|
|UNB6.2 (接收者參考辨識符號)|輸入最少 1 個字元，最多 2 個字元的英數字元值。|
|UNB7 (應用程式參考識別碼)|輸入最少 1 個字元，最多 14 個字元的英數字元值。|

### 通知
|屬性|說明 |
|----|----|
|訊息回條 (CONTRL)|如果主控夥伴預計會收到技術 (CONTRL) 通知，請選取此核取方塊。此設定指定傳送訊息的主控夥伴向來賓夥伴要求通知。|
|通知 (CONTRL)|如果主控夥伴預計會收到功能 (CONTRL) 通知，請選取此核取方塊。此設定指定傳送訊息的主控夥伴向來賓夥伴要求通知。|
|針對接受的交易集產生 SG1/SG4 迴圈|如果您選擇要求功能通知，選取此核取方塊，可在已接受交易集的功能 CONTRL 通知中強制產生 SG1/SG4 迴圈。|

### 結構描述
|屬性|說明 |
|----|----|
|UNH2.1 (TYPE)|選取交易集類型。|
|UNH2.2 (VERSION)|輸入訊息版本號碼。|
|UNH2.3 (RELEASE)|輸入訊息版次號碼。|
|結構描述|選取要使用的結構描述。結構描述位於您的整合帳戶中。若要存取結構描述，請先將整合帳戶連結至邏輯應用程式。|

### 信封
|屬性|說明 |
|----|----|
|UNB8 (處理優先順序代碼)|輸入不超過 1 個字元的字母值。|
|UNB10 (通訊協議)|輸入最少 1 個字元，最多 40 個字元的英數字元值。|
|UNB11 (測試指示器)|選取此核取方塊，指出產生的交換是測試資料|
|套用 UNA 區段 (字串服務建議)|選取此核取方塊，以針對要傳送的交換產生 UNA 區段。|
|套用 UNG 區段 (功能群組標頭)|選取此核取方塊，以在傳送給來賓夥伴之訊息的功能群組標頭中建立群組區段。下列的值用來建立 UNG 區段︰</br></br>的 **UNG1**, ，輸入最少 1 個字元，最多 2 個字元的英數字元值。。</br></br>如 **UNG2.1**, ，輸入最少一個字元，最多 35 個字元的英數字元值。</br></br>如 **UNG2.2**, ，輸入英數值，最多四個字元。</br></br>如 **UNG3.1**, ，輸入最少一個字元，最多 35 個字元的英數字元值。</br></br>如 **UNG3.2**, ，輸入英數值，最多四個字元。</br></br>對於 **UNG6**，輸入最少 1 個，最多3 個字元的英數字元值。</br></br>對於 **UNG7.1**，輸入最少 1 個字元，最多 3 個字元的英數字元值。</br></br>對於 **UNG7.2**，輸入最少 1 個字元，最多 3 個字元的英數字元值。</br></br>對於 **UNG7.3**，輸入最少 1 個字元，最多 6 個字元的英數字元值。</br></br>對於 **UNG8**，輸入最少 1 個字元，最多 14 個字元的英數字元值。|

### 字元集和分隔符號
除了字元集，您還可以為每個訊息類型輸入一組不同的分隔符號。如果指定的訊息結構描述未指定字元集，則會使用預設字元集。

|屬性|說明 |
|----|----|
|UNB1.1 (系統識別碼)|選取要套用於外送交換的 EDIFACT 字元集。|
|結構描述|從下拉式清單中選取結構描述。隨著每個資料列完成，將會加入新的資料列。針對選取的結構描述，選取要使用的分隔符號集︰</br></br>**元件元素分隔符號** – 輸入單一字元來分隔複合資料元素。</br></br>**資料元素分隔符號** – 輸入單一字元來分隔複合資料元素內的簡單資料元素。</br></br></br></br>**取代字元** – 如果承載資料包含也用於資料、區段或元件分隔符號的字元，請選取此核取方塊。然後，您可以輸入取代字元。產生輸出 EDIFACT 訊息時，承載資料中的所有分隔字元執行個體會取代為指定的字元。</br></br>**區段結束字元** – 輸入單一字元來指出 EDI 區段的結尾。</br></br>**尾碼** – 選取要搭配區段識別項使用的字元。如果指定尾碼，則區段結束字元資料元素可以空白。如果區段結束字元留空，則必須指定尾碼。|

### 控制編號
|屬性|說明 |
|----|----|
|UNB5 (交換控制編號)|輸入前置詞、交換控制編號的值範圍，以及後置詞。這些值用來產生外送交換。前置詞和後置詞均為選擇性；控制編號則為必要。控制編號會隨著每則新訊息遞增；前置詞和後置詞維持不變。|
|UNG5 (群組控制編號)|輸入前置詞、交換控制編號的值範圍，以及後置詞。這些值用來產生群組控制編號。前置詞和後置詞均為選擇性；控制編號則為必要。控制編號會隨著每則新訊息遞增，直到達到最大值為止；前置詞和後置詞維持不變。|
|UNH1 (訊息標頭參考編號)|輸入前置詞、交換控制編號的值範圍，以及後置詞。這些值會用來產生訊息標頭參考編號。前置詞和後置詞均為選擇性；參考編號則為必要。參考編號會隨著每則新訊息遞增；前置詞和後置詞維持不變。|

### 驗證
|屬性|說明 |
|----|----|
|訊息類型|選取此選項可對交換接收者進行驗證。這項驗證會對交易集資料元素、驗證資料類型、長度限制、空白資料元素和尾端分隔符號執行 EDI 驗證。|
|EDI 驗證|選取此核取方塊，依照結構描述、長度限制、空白資料元素和尾端分隔符號的 EDI 屬性定義，在資料類型上執行 EDI 驗證。|
|擴充驗證|選取此選項可讓交換傳送者接收交換的擴充驗證。除了 XSD 資料類型驗證，還包括驗證欄位長度、選擇性和重複計數。您可以啟用擴充驗證而不啟用 EDI 驗證，反之亦然。|
|允許前置/尾端零|選取此選項指定，如果 EDI 交換中的資料元素因為有尾端空格而不符合其長度要求，但移除後就符合長度要求，則從合作對象接收的 EDI 交換會通過驗證。|
|修剪前置/尾端零|選取此選項將會修剪前置和尾端零。|
|尾端分隔符號|選取此選項指定，如果 EDI 交換中的資料元素因為有前置 (或尾端) 零或尾端空格而不符合其長度要求，但移除後就符合長度要求，則從合作對象接收的 EDI 交換會通過驗證。</br></br>如果您不想要在交換傳送者接收的交換中允許尾端分隔符號，請選取 [不允許]。如果交換包含尾端分隔符號，會被宣告為無效。</br></br>選取 [選擇性] 接受交換可以有或沒有尾端分隔符號。</br></br>如果收到的交換必須包含尾端分隔符號，請選取 [必要]。|

在開啟的刀鋒視窗上選取 [確定] 之後︰
12. 在 [整合帳戶] 刀鋒視窗上選取 [合約] 圖格，而您將會看到已列出新加入的合約。![](./media/app-service-logic-enterprise-integration-edifact/EDIFACT-4.png)

## 詳細資訊
- [深入了解企業整合套件](./app-service-logic-enterprise-integration-overview.md "了解企業整合套件")

<!---HONumber=AcomDC_0727_2016-->