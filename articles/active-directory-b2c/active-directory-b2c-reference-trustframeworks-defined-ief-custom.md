---
title: "Azure Active Directory B2C：參考 - 信任架構 | Microsoft Docs"
description: "Azure Active Directory B2C 自訂原則的主題"
services: active-directory-b2c
documentationcenter: 
author: rojasja
manager: krassk
editor: rojasja
ms.assetid: 
ms.service: active-directory-b2c
ms.workload: identity
ms.tgt_pltfrm: na
ms.topic: article
ms.devlang: na
ms.date: 04/25/2017
ms.author: joroja
ms.translationtype: Human Translation
ms.sourcegitcommit: 2db2ba16c06f49fd851581a1088df21f5a87a911
ms.openlocfilehash: 019dd66d5abe4242ffb6cdc3276929dcd7f04466
ms.contentlocale: zh-tw
ms.lasthandoff: 05/09/2017


---

# <a name="defining-trust-frameworks-with-azure-ad-b2c-identity-experience-framework"></a>使用 Azure AD B2C 身分識別體驗架構來定義信任架構

利用身分識別體驗架構的 Azure AD B2C 自訂原則會為貴組織提供集中化服務，讓相關大型社群的身分識別同盟部署複雜度，降低為單一信任關係和單一中繼資料交換。

要實現這一點，利用身分識別體驗架構的 Azure AD B2C 自訂原則必須能讓您回答下列問題。

- 必須遵守哪些法律、安全性、隱私權和資料保護原則？
- 連絡人是誰，要經過哪些程序才能成為合格參與者？
- 誰是合格的身分識別資訊提供者 (又稱宣告提供者)？他們能提供什麼資訊？
- 誰是合格的信賴憑證者 [以及他們選擇需要什麼]？
- 在技術方面，參與者有哪些「線上」互通性需求？
- 必須強制執行哪些作業「執行階段」規則以便交換數位身分識別資訊？

為了回答上述所有問題，利用身分識別體驗架構的 Azure AD B2C 自訂原則會利用信任架構 (TF) 結構。 我們來看一下這個結構，並想想它能夠在這方面提供什麼。

## <a name="understanding-the-trust-framework-and-federation-management-foundation"></a>了解信任架構和同盟管理基礎

您應該將這類結構視為身分識別、安全性、隱私權和資料保護原則的書面規範，相關社群中的參與者都必須遵守此規範。

同盟身分識別可作為基礎，來供您實現網際網路規模的使用者身分識別保證。  藉由將身分識別的管理工作委派給第三方，使用者就能對多個信賴憑證者重複使用單一的數位身分識別。  

想要保證身分識別，實際上需要識別提供者 (Idp) 和屬性提供者 (AtP) 共同遵守特定的安全性、隱私權和作業方面的原則與作法。  若無法直接審查，信賴憑證者 (RP) 就必須對他們選擇要合作的 Idp 和 AtP 發展信任關係。  由於數位身分識別資訊的取用者和提供者數目如雨後春筍般迅速增加，想要繼續在雙方之間管理這些信任關係，或甚至在雙方之間交換所需的中繼資料以便連線到網路，已變成不可能的任務。  同盟中樞在解決這些問題上，只有些許成就。

TF 是 Open Identity Exchange (OIX) 信任架構模型的關鍵，在此模型中，每個相關社群都會受到特定 TF 規範的控管。 這類 TF 規範會定義︰

- 相關社群的安全性和隱私權計量，這些計量的定義如下︰
    - 參與者所提供/所需要的保證等級 (LOA)，也就是一組有先後次序的信賴評等，用以說明數位身分識別資訊的真實性。
    - 參與者所提供/所需要的保護等級 (LOP)，也就是一組有先後次序的信賴評等，用以說明相關社群參與者所處理之數位身分識別資訊的保護程度。
- 參與者所提供/所需要之數位身分識別資訊的說明。
- 相關技術原則，適用於生產和取用數位身分識別資訊，乃至於測量 LOA 和 LOP。 這些書面原則通常包含以下幾類原則︰
    - 身分識別證明原則︰個人的身分識別資訊受到多嚴格的審查？
    - 安全性原則︰資訊的完整性和機密性受到多嚴格的保護？
    - 隱私權原則︰使用者對於個人識別資訊 (PII) 擁有什麼樣的控制權？
    - 生存能力原則︰當提供者停止營業時，PII 的持續性和保護。
- 適用於生產和取用數位身分識別資訊的技術設定檔。 這些設定檔：
    - 界定在指定的 LOA 下，數位身分識別資訊所適用的介面。
    - 描述線上互通性的技術需求。
- 社群參與者可執行之各種角色以及要擔任這些角色所需之資格的說明。

因此，TF 規範會控管相關社群 (信賴憑證者、身分識別和屬性提供者，以及屬性驗證者) 的參與者彼此之間如何交換身分識別資訊。

就這個 OIX TF 模型來說，TF 規範會形成一份或多份文件，以供您參考如何對管制社群內數位身分識別資訊之判斷提示和取用的相關社群進行控管。 這代表著一組記載下來的原則和程序，其設計目的是要為相關社群成員之間的線上交易所使用的數位身分識別建立信任。  **TF 規範會為某些社群定義適用於建立可行之同盟身分識別生態系統的規則。**

截至今天，大家已普遍同意這類方法的好處，而且毋庸置疑地，信任架構規範會促進數位身分識別生態系統的發展，並讓此系統具有可驗證的安全性、保證和隱私權特性，使得這些規範能夠跨多個相關社群重複使用。

基於這個理由，利用身分識別體驗架構的 Azure AD B2C 自訂原則會以這些規範作為核心，再以此核心作為基礎來表示 TF 的資料，以促進互通性。  

利用身分識別體驗架構的 Azure AD B2C 自訂原則會以混用人類和機器可讀取之資料的方式來表示 TF 規範：此模型的某些部分 (通常是那些更傾向於控管的部分) 會表示為已發佈之安全性和隱私權原則文件以及相關程序 (如果有的話) 的參考，其他部分則會詳細說明用以促進作業自動化的組態中繼資料和執行階段規則。

## <a name="understanding-trust-framework-policies"></a>了解信任架構原則

在實作方面，上述 TF 規範在利用身分識別體驗架構的 Azure AD B2C 自訂原則中，會存在於一組原則內，而可讓您完整控制身分識別行為和體驗。  利用身分識別體驗架構的 Azure AD B2C 自訂原則實際上可讓您透過這類宣告式原則來撰寫及建立您自己的 TF，這些原則能定義及設定︰

- 文件參考，以定義與 TF 有關之社群的同盟身分識別生態系統。 文件參考是 TF 文件的連結。 (預先定義的) 作業「執行階段」規則或使用者旅程，後者會自動執行及/或控制宣告的交換和使用。 這些使用者旅程會與 LOA (和 LOP) 相關聯。 原則所具有的使用者旅程可能因此會有不同的 LOA (和 LOP)。
- 相關社群中的身分識別和屬性提供者或宣告提供者，以及這些提供者所支援的技術設定檔以及與他們相關的 (頻外) LOA/LOP 認證。
- 與屬性驗證者或宣告提供者的整合。
- 社群中的信賴憑證者 (依推斷)。
- 用於在參與者之間建立網路通訊的中繼資料。 在交易過程中，這些中繼資料以及技術設定檔會用來在信賴憑證者和其他社群參與者之間檢測「線上」互通性。
- 通訊協定轉換 (SAML、OAuth2、WS-同盟和 OpenID Connect)，如果有的話。
- 驗證需求。
- 多重要素協調流程，如果有的話。
- 適用於相關社群參與者並與之對應的所有宣告的共用結構描述。
- 所有宣告轉換 (以及在此內容中可能的資料最小化)，以支撐宣告的交換和使用。
- 繫結和加密。
- 宣告儲存體

> [!NOTE]
> 我們會將所有可交換的可能身分識別資訊類型統稱為宣告︰有關使用者驗證認證、身分識別審查、通訊裝置、實體位置、個人識別屬性等項目的宣告。  
>
> 我們之所以使用「宣告」一詞，而不使用屬性 (屬於子集)，是因為在線上交易的案例中，沒有任何事實可供信賴憑證者直接驗證；更準確地說，它們是判斷提示，或是有關事實 (信賴憑證者必須培養足夠的信心來對使用者授與所要求的交易) 的宣告。  
>
> 另一個原因是，事實上，利用身分識別體驗架構的 Azure AD B2C 自訂原則是設計來以一致的方式簡化所有數位身分識別資訊類型的交換，而不論針對驗證使用者或擷取屬性工作所定義的基礎通訊協定為何。  同樣地，當我們不想區別提供者專屬的函式時，我們會使用「宣告提供者」一詞來統稱識別提供者、屬性提供者和屬性驗證者。   

因此，這些原則會控管如何在信賴憑證者、識別提供者和屬性提供者以及屬性驗證者之間交換身分識別資訊。 這些原則會控制信賴憑證者的驗證工作需要使用哪一個識別提供者和屬性提供者。 您應將這些原則視為網域專屬語言 (DSL)，也就是特定應用程式網域專用的電腦語言，並具有繼承、if 陳述式、多型。

在利用身分識別體驗架構的 Azure AD B2C 自訂原則中，這些原則會構成機器可讀取的 TF 建構部分，並填入所有作業詳細資料 (包括宣告提供者的中繼資料和技術設定檔宣告結構描述定義、宣告轉換函式，以及使用者旅程)，以促進作業協調流程和自動化。  

在利用身分識別體驗架構的 Azure AD B2C 自訂原則中，這些原則應該是「會變動的文件」，因為其關於原則中所宣告之作用中參與者的內容會不只一次隨時間而改變，而且在某些情況下，其關於成為參與者之條款與條件的內容也可能會隨時間改變。  
藉由讓信賴憑證者不會因為不同的宣告提供者/驗證者加入或離開原則集 (所代表的社群) 而不斷重新設定信任和連線，同盟的設定和維護已大幅簡化。

因為信賴憑證者不可能支援所有必要的通訊協定，您勢必得整合其他宣告提供者/驗證者，因此互通性成為了另一項重大挑戰。 利用身分識別體驗架構的 Azure AD B2C 自訂原則可解決此問題，其方法是藉由支援業界標準的通訊協定，並在信賴憑證者和屬性提供者不支援相同的通訊協定時，套用特定的使用者旅程來調換要求。  

使用者旅程包括通訊協定設定檔和中繼資料，其可供用來在信賴憑證者和其他社群參與者之間檢測「線上」互通性。  身分識別資訊交換要求/回應訊息也會有適用的作業執行階段規則，以便強制它們遵守 TF 規範中的已發佈原則。 使用者旅程的概念是客戶體驗的自訂關鍵，並且會揭示系統在通訊協定層級的運作方式。

在該基礎上，信賴憑證者應用程式和入口網站可以根據其內容，叫用「利用身分識別體驗架構的 Azure AD B2C 自訂原則」以傳遞特定原則的名稱，並精確取得其所想要的行為和資訊交換，而不會有任何混亂、複雜或風險。

