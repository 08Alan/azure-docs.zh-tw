---
title: 什麼是自訂語音？ - Azure 認知服務 | Microsoft Docs
description: 本文概述 Microsoft 文字轉換語音的語音自訂功能，該功能可讓您建立足以辨識且獨一無二的品牌語音。
services: cognitive-services
author: noellelacharite
manager: nolach
ms.service: cognitive-services
ms.topic: article
ms.date: 05/07/2018
ms.author: nolach
ms.openlocfilehash: ad5af799fd46dc51b85432999f986de8cdb056ec
ms.sourcegitcommit: 95d9a6acf29405a533db943b1688612980374272
ms.translationtype: HT
ms.contentlocale: zh-TW
ms.lasthandoff: 06/23/2018
ms.locfileid: "35370318"
---
# <a name="creating-custom-voice-fonts"></a>建立客製化聲音音調

Microsoft 文字轉換語音 (TTS) 的語音自訂功能可讓您建立足以辨識且對您的品牌獨一無二的語音，也稱為「聲音音調」。 

若要建立聲音音調，請進行錄音室錄音，並上傳相關聯的腳本作為訓練資料。 此服務會接著建立專為您的錄音調整的獨特語音模型。 然後，您可以使用此聲音音調來合成語音。 

您可以從少量的資料開始進行概念證明。 但提供的資料愈多，您的語音聽起來會愈自然且專業。

目前提供美式英文 (en-US) 和簡體中文 (zh-CN) 的語音自訂功能。

## <a name="prerequisites"></a>先決條件

文字轉換語音的語音自訂功能目前處於個人預覽版狀態。 若要取得存取權，請[填寫申請表單](https://forms.office.com/Pages/ResponsePage.aspx?id=v4j5cvGGr0GRqy180BHbR0N8Vcdi8MZBllkZb70o6KdURjRaUzhBVkhUNklCUEMxU0tQMEFPMjVHVi4u)。

您也會需要：

* Azure 帳戶 (若您還沒有此帳戶，請[免費註冊](https://azure.microsoft.com/free/ai/))。

* 語音服務的訂用帳戶。 若您還沒有此帳戶，請[建立一個](https://ms.portal.azure.com/#create/Microsoft.CognitiveServicesSpeechServices)。

    ![建立面板](media/custom-voice/create-panel.png)

建立訂用帳戶之後，您可以在 [快速入門] 面板或新訂用帳戶的 [概觀] 面板上找到兩個訂用帳戶金鑰。 您可以使用任一金鑰。

最後，將您的訂用帳戶連線到自訂語音入口網站，如下所示。

1. 使用您用來申請存取權的相同 Microsoft 帳戶登入[自訂語音入口網站](https://customvoice.ai)。

2. 移至右上方帳戶名稱下的 [訂用帳戶]。

    ![訂用帳戶](media/custom-voice/subscriptions.png)

3. 在 [訂用帳戶] 頁面上，選擇 [Connect existing subscription] (連線到現有的訂用帳戶)。

     ![連線到現有的訂用帳戶](media/custom-voice/connect-existing-sub.png)

4. 將您的訂用帳戶金鑰貼到資料表中，如下所示。

     ![新增訂用帳戶](media/custom-voice/add-subscription.png)

您已經準備好了！

## <a name="prepare-recordings-and-transcripts"></a>準備錄音和文字記錄

語音訓練資料集包含一組音訊檔案，以及含有所有音訊檔案文字記錄的測試檔案。

您可以從任何方向準備這些檔案：撰寫腳本並讓配音人員讀出，或使用公開提供的音訊並轉譯成文字。 在後者的情況下，請編輯音訊檔案中不流利的情況，例如「嗯」及其他補白音、口吃、喃喃自語或錯誤發音。

若要產生良好的聲音音調，請務必在具備高品質麥克風的安靜房間內完成錄音。 一致的音量、讀出速率、讀出音調和易懂的語音表達方式是建立絕佳數位語音不可或缺的一部分。 若要建立語音以供生產環境使用，建議您使用專業錄音室和配音人員。

### <a name="audio-files"></a>音訊檔案

每個音訊檔案應包含單一語句 (例如單一句子或對話系統的單一回合)。 所有檔案都必須使用相同的語言 (不支援多語言自訂語音)。 每個音訊檔案也必須建立唯一的數值檔案名稱，副檔名為 `.wav`。

音訊檔案應準備如下。 其他格式未受支援且會遭到拒絕。

| **屬性** | **值** |
| ------------ | --------- |
| 檔案格式  | RIFF (WAV)|
| 取樣率| 16,000 Hz |
| 聲道     | 1 (單聲道)  |
| 樣本格式| PCM，16 位元 |
| 檔案名稱    | 數值，副檔名為 `.wav` |
| 封存格式| ZIP      |
| 封存大小上限|200 MB|

將一組音訊檔案放在沒有子目錄的單一資料夾中，並將整組封裝成單一的 ZIP 檔案封存。

> [!NOTE]
> 入口網站目前最多可匯入 200 MB 的 ZIP 封存。 不過，您可以上傳多個封存。 免費訂用帳戶使用者允許的資料集數目上限為 10 個 ZIP 檔案，標準訂用帳戶使用者為 50 個。

### <a name="transcripts"></a>文字記錄

轉譯檔案是 Unicode 純文字檔案 (UTF-16 位元組由大到小)。 轉譯檔案的每一行都必須具有音訊檔案的名稱，後面接著定位字元 (字碼指標 9)，最後是其文字記錄。 不允許空白行。

例如︰

```
0000000001  This is the waistline, and it's falling.
0000000002  We have trouble scoring.
0000000003  It was Janet Maslin.
```

自訂語音系統會透過將文字轉換成小寫並移除無關的標點符號，來標準化文字記錄。 文字記錄必須 100% 正確對應至錄音。

> [!TIP]
> 建立生產用文字轉換語音的語音時，選取語句 (或撰寫腳本)，並考慮注音涵蓋範圍和效率。

## <a name="upload-your-datasets"></a>上傳您的資料集

準備好您的音訊檔案封存和文字記錄之後，請透過[自訂語音服務入口網站](https://customvoice.ai)上傳。

> [!NOTE]
> 上傳資料集之後，即無法加以編輯。 例如，若您忘記包含某些音訊檔案的文字記錄，或不小心選擇錯誤的性別，您必須重新上傳整個資料集。 請徹底檢查您的資料集和設定，再開始上傳。

1. 登入入口網站。

2. 在主頁面的 [自訂語音] 下，選擇 [資料]。 

    ![我的專案](media/custom-voice/my-projects.png)

    [My Voice Data] \(我的語音資料\) 資料表隨即出現。 若您尚未上傳任何語音資料集，這會是空白的。

3. 按一下 [匯入資料] 以開啟頁面，供您上傳新的資料集。

    ![匯入語音資料](media/custom-voice/import-voice-data.png)

4. 在提供的欄位中輸入名稱和描述。 

5. 為您的聲音音調選取地區設定。 確定地區設定資訊符合錄音資料和腳本的語言。 

6. 選取您要使用其語音之說話者的性別。

7. 選擇要上傳的腳本和音訊檔案。 

8. 按一下 [匯入] 以上傳您的資料。 對於較大型的資料集，匯入可能需要幾分鐘的時間。

> [!NOTE]
> 免費訂用帳戶使用者一次可上傳兩個資料集。 標準訂用帳戶使用者可同時上傳五個資料集。 若達到限制，請等候直到至少其中一個資料集完成匯入，然後再試一次。

上傳完成時，[My Voice Data] \(我的語音資料\) 資料表會再次出現。 您應該會看到對應至剛上傳資料集的項目。 

上傳後，系統會自動驗證資料集。 資料驗證包括對音訊檔案的一連串檢查，以驗證其檔案格式、大小和取樣率。 轉譯檔案的檢查包括驗證檔案格式及執行某些文字正規化。 語句是透過語音辨識轉譯，而產生的文字會與您提供的文字記錄進行比較。

![我的語音資料](media/custom-voice/my-voice-data.png)

下表顯示所匯入資料集的處理狀態。 

| State | 意義
| ----- | -------
| `NotStarted` | 已收到您的資料集，並排入佇列進行處理
| `Running` | 正在驗證您的資料集
| `Succeeded` | 已驗證您的資料集，現在可用來建立聲音音調

驗證完成後，您可以在 [Utterance] \(語句\) 資料行中，看到每個資料集的相符語句總數。

您可以下載報表，來檢查每個錄音的發音分數和雜音程度。 發音分數的範圍從 0 到 100；70 以下的分數通常表示語音錯誤或腳本不符。 大量腔調字可能會降低您的發音分數，並影響產生的數位語音。

信噪比 (SNR) 愈高表示您音訊中的雜音愈低。 透過專業錄音室，通常可達到 50+ SNR。 SNR 低於 20 的音訊可能會在您產生的語音中導致明顯的雜音。

請考慮以較低的發音分數或較差的信噪比來重新錄製任何語句。 若無法重新錄製，您可以從資料集中排除這些語句。

## <a name="build-your-voice-font"></a>建立您的聲音音調

驗證您的資料集之後，您可以使用它來建立自訂聲音音調。 

1. 請從 [自訂語音] 下拉式清單，選擇 [模型]。 
 
    [My Voice Fonts] \(我的聲音音調\) 隨即出現，並列出您已建立的任何自訂聲音音調。

1. 按一下資料表標題下的 [Create voices] \(建立語音\)。 

    隨即出現頁面，供您建立聲音音調。 目前的地區設定會顯示在資料表的第一個資料列。 變更地區設定，以其他語言建立語音。 地區設定必須與用來建立語音的資料集相同。

1. 如同上傳資料集，請輸入名稱和描述，以便識別此模型。 

    您在這裡輸入的名稱，會是您在語音合成要求中指定語音作為 SSML 輸入一部分所使用的名稱，因此請小心選擇。 只允許字母、數字和一些標點符號字元，例如 '-'、'_'、'('、')'。

    [描述] 欄位的常見用法是記錄建立模型時所用的資料集名稱。

1. 選擇您聲音音調的性別。 其必須符合資料集的性別。

1. 選取您要用於訓練聲音音調的資料集。 所有使用的資料集都必須來自同一位說話者。

1. 按一下 [建立] 即可開始建立您的聲音音調。

    ![建立模型](media/custom-voice/create-model.png)

您的新模型會出現在 [My Voice Fonts] \(我的聲音音調\) 資料表中。 

![我的聲音音調](media/custom-voice/my-voice-fonts.png)

所顯示的狀態反映將您的資料集轉換成聲音音調的程序，如下所示。

| State | 意義
| ----- | -------
| `NotStarted` | 聲音音調建立要求已排入佇列進行處理
| `Running` | 正在建立您的聲音音調
| `Succeeded` | 已建立並可能部署您的聲音音調

訓練時間會因所處理的音訊資料量而有所不同。 一般時間範圍為數百個語句 30 分鐘到 20,000 個語句 40 小時。

> [!NOTE]
> 免費訂用帳戶使用者一次可訓練兩個聲音音調。 標準訂用帳戶使用者可同時訓練三個語音。 若達到限制，請等候直到至少其中一個聲音音調完成訓練，然後再試一次。

## <a name="test-your-voice-font"></a>測試您的聲音音調

一旦成功建立聲音音調，您就可以進行測試，再將它部署以供使用。 按一下 [作業] 資料行中的 [測試]。 所選聲音音調的測試頁隨即出現。 若您尚未提交任何語音測試要求，此資料表會是空白的。

![我的聲音音調第二部分](media/custom-voice/my-voice-fonts2.png)

按一下資料表標題下的 [Test with text] \(以文字測試\) 按鈕顯示快顯功能表，以提交文字要求。 您可以提交純文字或 SSML 格式的測試要求。 輸入大小上限為 1,024 個字元，包括 SSML 要求的所有標記。 您的文字語言必須與聲音音調語言相同。

![聲音音調測試](media/custom-voice/voice-font-testing.png)

填入文字方塊並確認輸入模式之後，按一下 [是] 以提交測試要求並返回測試頁。 資料表中現在包含與新的要求對應的項目，以及現在熟悉的狀態資料行。 合成語音可能需要幾分鐘的時間。 當狀態資料行為 [成功] 時，您可以下載文字輸入 (`.txt` 檔案) 和音訊輸出 (`.wav` 檔案)，並試聽後者以確保品質。

![聲音音調測試第二部分](media/custom-voice/voice-font-testing2.png)

## <a name="create-and-use-a-custom-endpoint"></a>建立並使用自訂端點

成功建立並測試語言模型之後，您可以將它部署至自訂文字轉換語音端點。 然後，您可以使用此端點取代透過 REST API 提出文字轉換語音要求時的慣用端點。 只有您用來部署音調的訂用帳戶可呼叫自訂端點。

若要建立新的自訂端點，請從頁面頂端的 [自訂語音] 功能表選擇 [端點]。 [部署] 頁面隨即出現，其中包含其目前自訂語音端點 (若有) 的資料表。

按一下 [Deploy voices] \(部署語音\) 按鈕以建立新的端點。 在 [建立端點] 頁面中，目前的地區設定會反映在資料表的前幾個資料列。 若要建立不同語言的部署，請變更顯示的地區設定 (其必須符合您要部署的語音)。輸入您自訂端點的名稱和描述。

從 [訂用帳戶] 功能表，選擇您要使用的訂用帳戶。 免費訂用帳戶使用者一次只能部署一個模型。 標準訂用帳戶使用者最多可以建立 20 個端點，各自有其自訂的語音。

![建立端點](media/custom-voice/create-endpoint.png)

選取要部署的模型之後，按一下 [建立]。 [部署] 頁面會重新顯示，現在包含您的新端點項目。 具現化新的端點可能需要幾分鐘的時間。 當部署狀態為 [成功] 時，端點就可供使用。

![我已部署的語音](media/custom-voice/my-deployed-voices.png)

當部署狀態為 [成功] 時，您已部署的聲音音調端點會出現在我已部署的語音資料表中。 您可以在 HTTP 要求中直接使用此 URI。

端點的線上測試也可透過自訂語音入口網站使用。 若要測試您的端點，請從 [自訂語音] 下拉式功能表選擇 [Endpoints testing] \(端點測試\)。 [Endpoint Testing] \(端點測試\) 頁面隨即出現。 選擇您已部署的語音，並將要說出口的文字 (以純文字或 SSML 格式) 輸入文字方塊。

> [!NOTE] 
> 使用 SSML 時，`<voice>` 標記必須指定您建立自訂語音時為其提供的名稱。

按一下 [播放] 聆聽以您自訂聲音音調說出口的文字。

![端點測試](media/custom-voice/endpoint-testing.png)

自訂端點的功能與用於文字轉換語音要求的標準端點完全相同。 如需詳細資訊，請參閱 [REST API](rest-apis.md)。

## <a name="next-steps"></a>後續步驟

- [取得語音試用版訂用帳戶](https://azure.microsoft.com/try/cognitive-services/)
- [以 C# 辨識語音](quickstart-csharp-windows.md)
